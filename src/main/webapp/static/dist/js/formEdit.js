!function(){"use strict";function encodeHTMLSource(){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},e=/&(?!#?\w+;)|<|>|"|'|\//g;return function(n){return n?n.toString().replace(e,function(e){return t[e]||e}):n}}function resolveDefs(c,block,def){return("string"==typeof block?block:block.toString()).replace(c.define||skip,function(m,code,assign,value){return 0===code.indexOf("def.")&&(code=code.substring(4)),code in def||(":"===assign?def[code]=value:eval("def['"+code+"']="+value)),""}).replace(c.use||skip,function(m,code){var v=eval(code);return v?resolveDefs(c,v,def):v})}function unescape(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var doT={version:"0.2.0",templateSettings:{evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0},global=function(){return this||(0,eval)("this")}();"undefined"!=typeof module&&module.exports?module.exports=doT:"function"==typeof define&&define.amd?define("util/doT",[],function(){return doT}):global.doT=doT,global.encodeHTML=encodeHTMLSource();var startend={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},skip=/$^/;doT.template=function(t,e,n){e=e||doT.templateSettings;var i,a,s,l=e.append?startend.append:startend.split,o=0;if(e.use||e.define){var d=global.def;global.def=n||{},i=resolveDefs(e,t,global.def),global.def=d}else i=t;i=("var out='"+(e.strip?i.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):i).replace(/'|\\/g,"\\$&").replace(e.interpolate||skip,function(t,e){return l.start+unescape(e)+l.end}).replace(e.encode||skip,function(t,e){return a=!0,l.startencode+unescape(e)+l.end}).replace(e.conditional||skip,function(t,e,n){return e?n?"';}else if("+unescape(n)+"){out+='":"';}else{out+='":n?"';if("+unescape(n)+"){out+='":"';}out+='"}).replace(e.iterate||skip,function(t,e,n,i){return e?(o+=1,s=i||"i"+o,e=unescape(e),"';var arr"+o+"="+e+";if(arr"+o+"){var "+n+","+s+"=-1,l"+o+"=arr"+o+".length-1;while("+s+"<l"+o+"){"+n+"=arr"+o+"["+s+"+=1];out+='"):"';} } out+='"}).replace(e.evaluate||skip,function(t,e){return"';"+unescape(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+="),a&&e.selfcontained&&(i="var encodeHTML=("+encodeHTMLSource.toString()+"());"+i);try{return new Function(e.varname,i)}catch(r){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+i),r}},doT.compile=function(t,e){return doT.template(t,null,e)}}(),define("util/ajax",[],function(){function t(t,e,n,i,a,s){s=s||{},$.ajax("/pa/survey/surveys"+e,$.extend({type:t,data:n,dataType:"json",success:i,error:a},s))}var e={creatSurveys:function(e,n,i,a){t("put","?site_id="+e,n,i,a)},uploadPic:function(e,n,i,a,s){t("post","/images?site_id="+e,n,i,a,s)},delSurvey:function(e,n,i,a){t("delete","/"+e+"?site_id="+n,i,a)},publish:function(e,n,i,a){t("put","/"+e+"/publish?site_id="+n,i,a)},setStatus:function(e,n,i,a,s,l){t("put","/"+e+"/answers/"+i+"/"+s+"?site_id="+n,a,l)},deleteAnswer:function(e,n,i,a,s){t("delete","/"+e+"/answers/"+i+"?site_id="+n,a,s)}};return e}),define("util/select",[],function(){var t={selectAction:function(t,e){var n;t.on("mouseenter",".f-select",function(){clearTimeout(n),t.find(".f-option-list").hide(),$(this).find(".f-option-list").show()}).on("mouseleave",".f-select",function(){var t=$(this).find(".f-option-list");n=setTimeout(function(){t.hide()},1e3)}).on("click","[data-action=option]",function(){var t=$(this).closest(".f-select").find("em"),n=$(this).closest(".f-option-list"),i=$(this).html(),a=$(this).attr("data-type"),s=$(this).attr("data-id"),l=$(this).attr("option-name"),o=$(this).attr("page-id"),d=$(this).attr("text-type"),r=$(this).attr("data-required"),c=$(this).attr("select-type");n.hide(),t.html(i),a&&t.attr("data-type",a),s&&t.attr("data-id",s),l&&t.attr("option-name",l),o&&t.attr("page-id",o),d&&t.attr("text-type",d),r&&t.attr("data-required",r),c&&t.attr("select-type",c),e&&e(this)})}};return t}),define("text",["module"],function(t){"use strict";var e,n,i,a,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,r=d&&location.protocol&&location.protocol.replace(/\:/,""),c=d&&location.hostname,f=d&&(location.port||void 0),p=[],m=t.config&&t.config()||{};return e={version:"2.0.6",strip:function(t){if(t){t=t.replace(l,"");var e=t.match(o);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=s[e];try{t=new ActiveXObject(n)}catch(i){}if(t){s=[n];break}}return t},parseName:function(t){var e,n,i,a=!1,s=t.indexOf("."),l=0===t.indexOf("./")||0===t.indexOf("../");return-1!==s&&(!l||s>1)?(e=t.substring(0,s),n=t.substring(s+1,t.length)):e=t,i=n||e,s=i.indexOf("!"),-1!==s&&(a="strip"===i.substring(s+1),i=i.substring(0,s),n?n=i:e=i),{moduleName:e,ext:n,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,a){var s,l,o,d=e.xdRegExp.exec(t);return d?(s=d[2],l=d[3],l=l.split(":"),o=l[1],l=l[0],!(s&&s!==n||l&&l.toLowerCase()!==i.toLowerCase()||(o||l)&&o!==a)):!0},finishLoad:function(t,n,i,a){i=n?e.strip(i):i,m.isBuild&&(p[t]=i),a(i)},load:function(t,n,i,a){if(a.isBuild&&!a.inlineText)return void i();m.isBuild=a.isBuild;var s=e.parseName(t),l=s.moduleName+(s.ext?"."+s.ext:""),o=n.toUrl(l),p=m.useXhr||e.useXhr;!d||p(o,r,c,f)?e.get(o,function(n){e.finishLoad(t,s.strip,n,i)},function(t){i.error&&i.error(t)}):n([l],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,i)})},write:function(t,n,i,a){if(p.hasOwnProperty(n)){var s=e.jsEscape(p[n]);i.asModule(t+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,n,i,a,s){var l=e.parseName(n),o=l.ext?"."+l.ext:"",d=l.moduleName+o,r=i.toUrl(l.moduleName+o)+".js";e.load(d,i,function(n){var i=function(t){return a(r,t)};i.asModule=function(t,e){return a.asModule(t,r,e)},e.write(t,d,i,s)},s)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),e.get=function(t,e){var i=n.readFileSync(t,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),e(i)}):"xhr"===m.env||!m.env&&e.createXhr()?e.get=function(t,n,i,a){var s,l=e.createXhr();if(l.open("GET",t,!0),a)for(s in a)a.hasOwnProperty(s)&&l.setRequestHeader(s.toLowerCase(),a[s]);m.onXhr&&m.onXhr(l,t),l.onreadystatechange=function(e){var a,s;4===l.readyState&&(a=l.status,a>399&&600>a?(s=new Error(t+" HTTP status: "+a),s.xhr=l,i(s)):n(l.responseText),m.onXhrComplete&&m.onXhrComplete(l,t))},l.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,a="utf-8",s=new java.io.File(t),l=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),a)),d="";try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=o.readLine());)n.append(l),n.append(i);d=String(n.toString())}finally{o.close()}e(d)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),e.get=function(t,e){var n,s,l={},o=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(o,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),s.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),e(l.value)}catch(d){throw new Error((o&&o.path||"")+": "+d)}}),e}),define("text!template/alert.html!strip",[],function(){return'<div class="f-alert" style="display: none; width:{{=it.confirmWidth}}">\n<div class="f-mask"></div>\n    <div class="f-alert-body">\n        <div class="f-alert-msg">\n            {{=it.msg}}\n        </div>\n    </div>\n    <div class="f-alert-footer">\n        <a href="javascript:void(0);" class="f-btn f-btn-blue" id="yesBtn">{{=it.InnerYesBtn}}</a>\n        <a href="javascript:void(0);" class="f-btn f-btn-gray" id="noBtn">{{=it.InnerNoBtn}}</a>\n    </div>\n\n</div>\n'}),define("util/alert",["util/doT","text!template/alert.html!strip"],function(t,e){var n,i,a,s;return s=$(window),n=!1,i=t.template(e),{show:function(t,e,n){var l;a=t.isCenter,l=$(i({msg:t.msg||"确定要删除吗",InnerYesBtn:t.InnerYesBtn||"删除",InnerNoBtn:t.InnerNoBtn||"取消",confirmWidth:t.confirmWidth})),l.appendTo($("body")),a?l.css({position:"fixed","margin-left":-l.outerWidth()/2,"margin-top":-l.outerHeight()/2,top:"50%",left:"50%"}):l.css({position:"absolute","margin-left":-l.outerWidth()/2,"margin-top":-l.outerHeight(),top:t.top,left:t.left}),l.show(),l.on("click","#yesBtn",function(){e(),l.remove(),a&&s.off("scroll.alert")}),l.on("click","#noBtn",n||function(){l.remove(),a&&s.off("scroll.alert")})}}}),define("util/share",[],function(){function t(t,e){window.open(t,"_blank",e)}function e(t,e){var e;switch(t){case"weibo":i(e);break;case"renren":a(e);break;case"qq":s(e);break;case"sohu":shareToSohu(e);break;case"douban":l(e);break;case"qwb":n(e)}}function n(e){var n,i,a,s,l,o;n=440,i=430,a=(screen.width-n)/2,s=(screen.height-i)/2,l=["toolbar=0,resizable=1,scrollbars=yes,status=1,width=",n,",height=",i,",left=",a,",top=",s].join(""),o=["http://share.v.t.qq.com/index.php?c=share&a=index&","url=",encodeURIComponent(e.url),"&title=",encodeURIComponent(e.title),"&pic=",encodeURIComponent(e.pic)].join(""),t(o,l)}function i(e){var n,i,a,s,l,d;n=440,i=430,a=(screen.width-n)/2,s=(screen.height-i)/2,l=["toolbar=0,status=0,resizable=1,width=",n,",height=",i,",left=",a,",top=",s].join(""),d=["http://service.t.sina.com.cn/share/share.php?","appkey=",o,"&title=",encodeURIComponent(e.title),"&url=",encodeURIComponent(e.url),"&pic=",encodeURIComponent(e.pic)].join(""),t(d,l)}function a(e){var n,i,a,s,l,o;n=540,i=480,a=(screen.width-n)/2,s=(screen.height-i)/2,l=["toolbar=0,status=0,resizable=1,width=",n,",height=",i,",left=",a,",top=",s].join(""),o=["http://widget.renren.com/dialog/share?","resourceUrl=",encodeURIComponent(e.url),"&title=",encodeURIComponent(e.title),"&pic=",encodeURIComponent(e.pic)].join(""),t(o,l)}function s(e){var n,i,a,s,l,o;n=540,i=480,a=(screen.width-n)/2,s=(screen.height-i)/2,l=["toolbar=0,resizable=1,scrollbars=yes,status=1,width=",n,",height=",i,",left=",a,",top=",s].join(""),o=["http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?","url=",encodeURIComponent(e.url),"&title=",encodeURIComponent(e.title),"&pics=",encodeURIComponent(e.pic)].join(""),t(o,l)}function l(t){!function(t,e,n,i,a){var s=window.getSelection,l=t.getSelection,o=t.selection,d=(s?s():l?l():o?o.createRange().text:"","http://www.douban.com/share/service/?href="+n(t.url)+"%26name="+n(t.title)),r=function(){window.open(d,"douban","toolbar=0,resizable=1,scrollbars=yes,status=1,width="+i+",height="+a+",left="+(e.width-i)/2+",top="+(e.height-a)/2)||(location.href=d)};setTimeout(r,10)}(t,screen,encodeURIComponent,500,360)}var o;return o="992243007",{shareTo:e}}),define("text!template/form_item/checkbox.html!strip",[],function(){return'<section class="f-form-item" data-name="id_checkbox" current="true">\n	<h2><em>{{!it.title}}</em>{{?it.required ==1}}<span>*</span>{{??}}{{?}}</h2>\n	<div class="f-item-wrap">\n		{{~it.value:list}}\n		<div class="f-control" data-type="list">\n			<label>\n				<input type="checkbox" />\n				{{?list.img}}\n				<em class="f-img"><img src="{{=list.img}}"></em>\n				{{?}}\n				<span>{{!list.name}}</span>\n			</label>\n		</div>\n		{{~}}\n	</div>\n	<div class="f-item-mask" data-action="edit-checkbox"></div>\n	<i class="iconfont f-item-del" >&#xe605;</i>\n</section>'}),define("text!template/form_item/input.html!strip",[],function(){return'<section class="f-form-item" data-name="id_text" current="true">\n	<h2><em>{{!it.title}}</em>{{?it.required == 1}}<span>*</span>{{??}}{{?}}</h2>\n	<div class="f-item-wrap">\n		<div class="f-control">\n		<input type="{{=it.type}}"  data-name="text"/>\n		</div>\n	</div>\n	<div class="f-item-mask" data-action="edit-input"></div>\n	<i class="iconfont f-item-del" >&#xe605;</i>\n</section>'}),define("text!template/form_item/line.html!strip",[],function(){return'<section class="f-form-item"  data-name="id_section" current="true">\n	<h2><em>{{!it.title}}</em></h2>\n	<div class="f-item-wrap">\n		<div class="f-control">\n			<hr class="f-line" />\n		</div>\n	</div>\n	<div class="f-item-mask" data-action="edit-line"></div>\n	<i class="iconfont f-item-del" >&#xe605;</i>\n</section>'}),define("text!template/form_item/radio.html!strip",[],function(){return'<section class="f-form-item"  data-name="id_radio" current="true">\n	<h2><em>{{!it.title}}</em>{{?it.required ==1}}<span>*</span>{{??}}{{?}}</h2>\n	<div class="f-item-wrap">\n		{{~it.value:list}}\n		<div class="f-control" data-type="list">\n			<label>\n				<input type="radio" />\n				{{?list.img}}\n				<em class="f-img"><img src="{{=list.img}}"></em>\n				{{?}}\n				<span>{{!list.name}}</span>\n			</label>\n		</div>\n		{{~}}\n	</div>\n	<div class="f-item-mask" data-action="edit-radio"></div>\n	<i class="iconfont f-item-del" >&#xe605;</i>\n</section>'}),define("text!template/form_item/select.html!strip",[],function(){return'<section class="f-form-item"  data-name="id_dropdown"  current="true">\n    <h2><em>{{!it.title}}</em>{{?it.required ==1}}<span>*</span>{{??}}{{?}}</h2>\n    <div class="f-item-wrap">\n        <div class="f-control">\n            <div class="f-select">\n                <em>请选择</em>\n                <i class="iconfont">&#xe601;</i>\n            </div>\n            <ul class="f-option-list" style="display: block" data-type="select">\n                    {{~it.value:list}}\n                    <li class="option">{{!list.name}}</li>\n                    {{~}}\n            </ul>\n        </div>\n    </div>\n    <div class="f-item-mask" data-action="edit-select"></div>\n    <i class="iconfont f-item-del" >&#xe605;</i>\n</section>'}),define("text!template/form_item/textarea.html!strip",[],function(){return'<section class="f-form-item" data-name="id_textarea" current="true">\n	<h2><em>{{!it.title}}</em>{{?it.required == 1}}<span>*</span>{{??}}{{?}}</h2>\n	<div class="f-item-wrap">\n		<div class="f-control">\n			<textarea  data-name="text"></textarea>\n		</div>\n	</div>\n	<div class="f-item-mask" data-action="edit-textarea"></div>\n	<i class="iconfont f-item-del" >&#xe605;</i>\n</section>'}),define("text!template/form_item/item_list.html!strip",[],function(){return'{{~it:list}}\n	{{?list.name == \'id_checkbox\'}}\n		<section class="f-form-item" data-name="id_checkbox" current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				{{~list.value:item}}\n				<div class="f-control" data-type="list">\n					<label>\n						<input type="checkbox" />\n						<span>{{!item.name}}</span>\n					</label>\n				</div>\n				{{~}}\n			</div>\n			<div class="f-item-mask" data-action="edit-checkbox"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_image_checkbox\'}}\n		<section class="f-form-item" data-name="id_checkbox" current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				{{~list.value:item}}\n				<div class="f-control" data-type="list">\n					<label>\n						<input type="checkbox" />\n						{{?item.img}}\n						<em class="f-img"><img src="{{=item.img}}"></em>\n						{{?}}\n						<span>{{!item.name}}</span>\n					</label>\n				</div>\n				{{~}}\n			</div>\n			<div class="f-item-mask" data-action="edit-checkbox"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_radio\'}}\n		<section class="f-form-item"  data-name="id_radio" current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				{{~list.value:item}}\n				<div class="f-control" data-type="list">\n					<label>\n						<input type="radio" />\n						<span>{{!item.name}}</span>\n					</label>\n				</div>\n				{{~}}\n			</div>\n			<div class="f-item-mask" data-action="edit-radio"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_image_radio\'}}\n		<section class="f-form-item"  data-name="id_radio" current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				{{~list.value:item}}\n				<div class="f-control" data-type="list">\n					<label>\n						<input type="radio" />\n						{{?item.img}}\n						<em class="f-img"><img src="{{=item.img}}"></em>\n						{{?}}\n						<span>{{!item.name}}</span>\n					</label>\n				</div>\n				{{~}}\n			</div>\n			<div class="f-item-mask" data-action="edit-radio"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_section\'}}\n		<section class="f-form-item"  data-name="id_section" current="true">\n			<h2><em>{{!list.title}}</em></h2>\n			<div class="f-item-wrap">\n				<div class="f-control">\n					<hr class="f-line" />\n				</div>\n			</div>\n			<div class="f-item-mask" data-action="edit-line"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_text\'}}\n		<section class="f-form-item" data-name="id_text" current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				<div class="f-control">\n				<input type="{{=list.type}}"  data-name="text"/>\n				</div>\n			</div>\n			<div class="f-item-mask" data-action="edit-input"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_textarea\'}}\n		<section class="f-form-item" data-name="id_textarea" current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				<div class="f-control">\n					<textarea  data-name="text"></textarea>\n				</div>\n			</div>\n			<div class="f-item-mask" data-action="edit-textarea"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_dropdown\'}}\n		<section class="f-form-item"  data-name="id_dropdown"  current="true">\n		    <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n		    <div class="f-item-wrap">\n		        <div class="f-control">\n		            <div class="f-select">\n		                <em>请选择</em>\n		                <i class="iconfont">&#xe601;</i>\n		            </div>\n		            <ul class="f-option-list" style="display: block" data-type="select">\n		                    {{~list.value:item}}\n		                    <li class="option">{{!item.name}}</li>\n		                    {{~}}\n		            </ul>\n		        </div>\n		    </div>\n		    <div class="f-item-mask" data-action="edit-select"></div>\n		    <i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_image\'}}\n		<section class="f-form-item"  data-name="id_image"  current="true">\n			<h2><em>{{!list.title}}</em>{{?list.required ==1}}<span>*</span>{{??}}{{?}}</h2>\n			<div class="f-item-wrap">\n				<div class="f-description"><span>{{!list.description}}</span></div>\n				<div class="f-control">\n					<span class="f-span">选择图片</span>\n					<input type="file" class="file-image" data-name="fileImage" data-action="add-image" size="28" />\n					<div class="image-style">\n						<a href="javascript:void(0);">\n							{{?list.img}}\n							<img class="f-img" src="{{=list.img}}" />\n							{{?}}\n						</a>\n					</div>\n				</div>\n			</div>\n			<div class="f-item-mask" data-action="edit-image"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n	{{?list.name == \'id_picture\'}}\n		<section class="f-form-item"  data-name="id_picture"  current="true">\n			<div class="f-item-wrap">\n				<div class="f-control">\n					<a href="{{=list.url}}">\n						{{?list.img}}\n						<img class="f-img" src="{{=list.img}}" />\n						{{?}}\n					</a>\n				</div>\n				<div class="f-descriptions"><span>{{!list.descriptions}}</span></div>\n			</div>\n			<div class="f-item-mask" data-action="edit-picture"></div>\n			<i class="iconfont f-item-del" >&#xe605;</i>\n		</section>\n	{{?}}\n{{~}}'}),define("text!template/form_item/image.html!strip",[],function(){return'<section class="f-form-item"  data-name="id_image" current="true">\r\n    <h2><em>{{!it.title}}</em>{{?it.required ==1}}<span>*</span>{{??}}{{?}}</h2>\r\n    <div class="f-item-wrap">\r\n        <div class="f-description"><span>{{!it.description}}</span></div>\r\n        <div class="f-control">\r\n            <span class="f-span">选择图片</span>\r\n            <input type="file" class="file-image" data-name="fileImage" data-action="add-image" size="28" />\r\n            <div class="image-style">\r\n                <a href="javascript:void(0);">\r\n                    <img class="f-img" src="http://kzcdn.itc.cn/res/skin/images/img/pic-one.png" />\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="f-item-mask" data-action="edit-image"></div>\r\n    <i class="iconfont f-item-del" >&#xe605;</i>\r\n</section>'}),define("text!template/form_item/picture.html!strip",[],function(){return'<section class="f-form-item"  data-name="id_picture" current="true">\r\n    <div class="f-item-wrap">\r\n        <div class="f-control">\r\n            <a href="{{=it.url}}">\r\n                {{?it.img}}\r\n                <img class="f-img" src="{{=it.img}}" />\r\n                {{?}}\r\n            </a>\r\n        </div>\r\n        <div class="f-descriptions"><span>{{!it.descriptions}}</span></div>\r\n    </div>\r\n    <div class="f-item-mask" data-action="edit-picture"></div>\r\n    <i class="iconfont f-item-del" >&#xe605;</i>\r\n</section>'}),define("text!template/form_setting/checkbox.html!strip",[],function(){return'    <fieldset class="f-mold f-fieldset">\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>操作设置</label>\n                <div class="f-grid">\n                    <div class="f-select">\n                    {{?it.required}}\n                        <em data-required="1">该项必选</em>\n                    {{??}}\n                        <em data-required="0">可选填</em>\n                    {{?}}\n                        <i class="iconfont">&#xe601;</i>\n                        <ul class="f-option-list">\n                            <li class="f-option" data-action="option" data-required="1">该项必选</li>\n                            <li class="f-option" data-action="option" data-required="0">可选填</li>\n                        </ul>\n                    </div>\n                </div> \n                <div class="f-grid">\n                    <div class="f-select">\n                    {{?it.name == \'id_radio\'}}\n                        <em option-name="id_radio">单选框</em>\n                        {{??}}\n                        <em option-name="id_checkbox">复选框</em>\n                        {{?}}\n                        <i class="iconfont">&#xe601;</i>\n                        <ul class="f-option-list">\n                            <li class="f-option" data-action="option" option-name="id_radio">单选框</li>\n                            <li class="f-option" data-action="option" option-name="id_checkbox">复选框</li>\n                        </ul>\n                    </div>\n                </div> \n            </div>\n        </div>\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>编辑标题</label>\n                <div class="f-grid">\n                    <input type="text" class="f-input" {{?it.title == \'默认标题\'}}placeholder="{{!it.title}}"{{??}} value="{{!it.title}}"{{?}} data-name="title" />\n                </div>  \n            </div>\n            <div class="f-control-tips">\n                <label>提示</label>\n                <em>已经输入<span>0</span>个字，最多可输入25个字</em>\n            </div>\n        </div>\n        <div class="f-control-group">\n            {{~it.value:list}}\n            <div class="f-control f-setting-option">\n                <label>编辑选项</label>\n                <div class="f-grid">\n                    <input type="text" class="f-input" {{?list.name == \'默认选项\'}}placeholder="{{!list.name}}" {{??list.name == \'新建选项\'}}placeholder="{{!list.name}}"{{??}}value="{{!list.name}}"{{?}}data-name="option" />\n                </div>\n                {{?list.img}}\n                <a href="javascript:void(0);" class="f-edit-button f-edit-pic-button f-edit-delpic-button" data-action="del-pic" >\n                    <i class="iconfont">&#xe60e;</i>\n                </a>\n                {{??}}\n                <a href="javascript:void(0);" class="f-edit-button f-edit-pic-button" >\n                    <i class="iconfont">&#xe60f;</i>\n                    <input type="file" data-action="add-pic"/>\n                </a>\n                {{?}}\n                <a href="javascript:void(0);" class="f-edit-button" data-action="del-item"><i class="iconfont">&#xe602;</i></a>\n                <!-- <em class="f-select-placeholder"></em> -->\n                <a href="javascript:void(0);" class="f-edit-button" data-action="add-item"><i class="iconfont">&#xe604;</i></a>\n            </div>\n            {{~}}\n        </div>\n    </fieldset>'}),define("text!template/form_setting/line.html!strip",[],function(){return'\n    <fieldset class="f-mold f-fieldset">\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>编辑标题</label>\n                <div class="f-grid">\n                    <input type="text" class="f-input" placeholder="{{!it.title}}" data-name="title" />\n                </div>  \n            </div>\n            <div class="f-control-tips">\n                <label>提示</label>\n                <em>已经输入<span>0</span>个字，最多可输入25个字</em>\n            </div>\n        </div>\n        <em option-name="id_section" style="display:none"></em>\n    </fieldset>\n'}),define("text!template/form_setting/select.html!strip",[],function(){return'\n    <fieldset class="f-mold f-fieldset">\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>操作设置</label>\n                <div class="f-grid">\n                    <div class="f-select">\n                    {{?it.required}}\n                        <em data-required="1">该项必选</em>\n                    {{??}}\n                        <em data-required="0">可选填</em>\n                    {{?}}\n                        <i class="iconfont">&#xe601;</i>\n                        <ul class="f-option-list">\n                            <li class="f-option" data-action="option" data-required="1">该项必选</li>\n                            <li class="f-option" data-action="option" data-required="0">可选填</li>\n                        </ul>\n                    </div>\n                </div> \n            </div>\n        </div>\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>编辑标题</label>\n                <div class="f-grid">\n                    <input type="text" class="f-input" {{?it.title == \'默认标题\'}}placeholder="{{!it.title}}"{{??}} value="{{!it.title}}"{{?}} data-name="title" />\n                </div>  \n            </div>\n            <div class="f-control-tips">\n                <label>提示</label>\n                <em>已经输入<span>0</span>个字，最多可输入25个字</em>\n            </div>\n        </div>\n        <div class="f-control-group f-control-group-select">\n            {{~it.value:list}}\n            <div class="f-control f-setting-option">\n                <label>编辑选项</label>\n                <div class="f-grid"> \n                     <input type="text" class="f-input" {{?list.name == \'默认选项\'}}placeholder="{{!list.name}}" {{??list.name == \'新建选项\'}}placeholder="{{!list.name}}"{{??}}value="{{!list.name}}"{{?}}data-name="option" />\n                </div>\n                <a href="#" class="f-edit-button" data-action="del-item"><i class="iconfont">&#xe602;</i></a>\n                <!-- <em class="f-select-placeholder"></em> -->\n                <a href="#" class="f-edit-button" data-action="add-item"><i class="iconfont">&#xe604;</i></a>\n            </div>\n            {{~}}\n        </div>\n        <em option-name="id_dropdown" style="display:none"></em>\n    </fieldset>\n'}),define("text!template/form_setting/text.html!strip",[],function(){return'\n    <fieldset class="f-mold f-fieldset">\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>操作设置</label>\n                <div class="f-grid">\n                    <div class="f-select">\n                    {{?it.required == 1}}\n                        <em data-required="1">该项必选</em>\n                    {{??}}\n                        <em data-required="0">可选填</em>\n                    {{?}}\n                        <i class="iconfont">&#xe601;</i>\n                        <ul class="f-option-list">\n                            <li class="f-option" data-action="option" data-required="1">该项必选</li>\n                            <li class="f-option" data-action="option" data-required="0">可选填</li>\n                        </ul>\n                    </div>\n                </div> \n                <div class="f-grid">\n                    <div class="f-select">\n                        {{?it.name == \'id_textarea\'}}\n                        <em option-name="id_textarea">多行文本</em>\n                        {{??}}\n                        <em option-name="id_text">单行文本</em>\n                        {{?}}\n                        <i class="iconfont">&#xe601;</i>\n                        <ul class="f-option-list">\n                            <li class="f-option" data-action="option" option-name="id_text">单行文本</li>\n                            <li class="f-option" data-action="option" option-name="id_textarea">多行文本</li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="f-grid" id="f_text_type">\n                    <div class="f-select">\n                        {{?it.type == \'email\'}}\n                        <em text-type="email">Email</em>\n                        {{??it.type == \'tel\'}}\n                        <em text-type="tel">手机号</em>\n                        {{??it.type == \'date\'}}\n                        <em text-type="date">日期</em>\n                        {{??}}\n                        <em text-type="text">不限内容</em>\n                        {{?}}\n                        <i class="iconfont">&#xe601;</i>\n                        <ul class="f-option-list">\n                            <li class="f-option" data-action="option" text-type="text">不限内容</li>\n                            <li class="f-option" data-action="option" text-type="email">Email</li>\n                            <li class="f-option" data-action="option" text-type="tel">手机号</li>\n                            <li class="f-option" data-action="option" text-type="date">日期</li>\n                        </ul>\n                    </div>\n                </div>    \n            </div>\n        </div>\n        <div class="f-control-group">\n            <div class="f-control">\n                <label>编辑标题</label>\n                <div class="f-grid">\n                    <input type="text" class="f-input"  placeholder="{{!it.title}}" data-name="title" />\n                </div>  \n            </div>\n            <div class="f-control-tips">\n                <label>提示</label>\n                <em>已经输入<span>0</span>个字，最多可输入25个字</em>\n            </div>\n        </div>\n    </fieldset>';
}),define("text!template/form_setting/select_item.html!strip",[],function(){return'<div class="f-control f-setting-option">\n	<label>编辑选项</label>\n	<div class="f-grid"> \n	<input type="text" class="f-input"  data-name="option" {{?it.text}}value="{{!it.text}}{{??}}placeholder="新建选项"{{?}}" />\n	</div>\n	{{?it.img}}\n	<a href="javascript:void(0);" class="f-edit-button f-edit-pic-button" >\n        <i class="iconfont">&#xe60f;</i>\n        <input type="file" data-action="add-pic"/>\n    </a>\n    {{?}}\n	<a href="#" class="f-edit-button" data-action="del-item"><i class="iconfont">&#xe602;</i></a>\n	<a href="#" class="f-edit-button" data-action="add-item"><i class="iconfont">&#xe604;</i></a>\n</div>'}),define("text!template/form_setting/select_del_item.html!strip",[],function(){return'<div class="f-control f-setting-option">\n	<label>编辑选项</label>\n	<div class="f-grid"> \n	<input type="text" class="f-input"  data-name="option" {{?it.text}}value="{{!it.text}}{{??}}placeholder="新建选项"{{?}}" />\n	</div>\n	<a href="javascript:void(0);" class="f-edit-button f-edit-pic-button f-edit-delpic-button" data-action="del-pic" >\n        <i class="iconfont">&#xe60e;</i>\n    </a>\n	<a href="#" class="f-edit-button" data-action="del-item"><i class="iconfont">&#xe602;</i></a>\n	<a href="#" class="f-edit-button" data-action="add-item"><i class="iconfont">&#xe604;</i></a>\n	<img style="display:none" src="{{=it.img}}" />\n</div>'}),define("text!template/form_setting/search_page.html!strip",[],function(){return'<ul class="f-search-list">\n	{{~it.list:list}}\n    <li data-action="seach-item" data-docId="{{=list.id}}">{{!list.name}}</li>\n	{{~}}\n</ul>'}),define("text!template/form_setting/image.html!strip",[],function(){return'\r\n    <fieldset class="f-mold f-fieldset">\r\n        <div class="f-control-group">\r\n            <div class="f-control">\r\n                <label>操作设置</label>\r\n                <div class="f-grid">\r\n                    <div class="f-select">\r\n                        {{?it.required}}\r\n                        <em data-required="1">该项必选</em>\r\n                        {{??}}\r\n                        <em data-required="0">可选填</em>\r\n                        {{?}}\r\n                        <i class="iconfont">&#xe601;</i>\r\n                        <ul class="f-option-list">\r\n                            <li class="f-option" data-action="option" data-required="1">该项必选</li>\r\n                            <li class="f-option" data-action="option" data-required="0">可选填</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="f-control-group">\r\n            <div class="f-control">\r\n                <label>编辑标题</label>\r\n                <div class="f-grid">\r\n                    <input type="text" class="f-input" {{?it.title == "默认标题"}}placeholder="{{!it.title}}"{{??}} value="{{!it.title}}"{{?}} data-name="title" />\r\n                </div>\r\n            </div>\r\n            <div class="f-control-tips">\r\n                <label>提示</label>\r\n                <em>已经输入<span>0</span>个字，最多可输入25个字</em>\r\n            </div>\r\n        </div>\r\n        <div class="f-control-group">\r\n            <div class="f-control">\r\n                <label>描述文字</label>\r\n                <div class="f-grid">\r\n                    <textarea type="text" class="f-textarea" data-name="description" {{?it.description == "输入上传图片的相关描述"}}placeholder="{{!it.description}}"{{??it.description == ""}}placeholder="输入上传图片的相关描述"{{?}}>{{?it.description != "输入对图片的描述文字"||""}}{{!it.description}}{{?}}</textarea>\r\n                </div>\r\n            </div>\r\n            <div class="f-control-tips">\r\n                <label>提示</label>\r\n                <em>已经输入<span>0</span>个字，最多可输入100个字</em>\r\n            </div>\r\n        </div>\r\n        <em option-name="id_image" style="display:none"></em>\r\n    </fieldset>'}),define("text!template/form_setting/picture.html!strip",[],function(){return'\r\n    <fieldset class="f-mold f-fieldset">\r\n        <div class="f-control-group">\r\n            <div class="f-control">\r\n                <label>图片描述</label>\r\n                <div class="f-grid">\r\n                    <textarea type="text" class="f-textarea" data-name="descriptions" {{?it.descriptions == "输入对图片的相关描述"}}placeholder="{{!it.descriptions}}"{{??it.descriptions == ""}}placeholder="输入对图片的相关描述"it.descriptions= "输入对图片的相关描述"{{?}}>{{?it.descriptions != "输入对图片的相关描述"||""}}{{!it.descriptions}}{{?}}</textarea>\r\n                </div>\r\n            </div>\r\n            <div class="f-control-tips">\r\n                <label>提示</label>\r\n                <em>已经输入<span>0</span>个字，最多可输入100个字</em>\r\n            </div>\r\n        </div>\r\n        <div class="f-control-group">\r\n            <div class="f-control f-setting-option">\r\n                <label>选择图片</label>\r\n                <div class="f-grid">\r\n                    <input type="text" class="f-input" placeholder="请选择小于5M的文件进行上传" data-name="name" readonly="readonly">\r\n                </div>\r\n                {{?it.img}}\r\n                <a href="javascript:void(0);" class="f-edit-button f-edit-pic-button f-edit-delpic-button" data-action="del-picture">\r\n                    <i class="iconfont">&#xe60e;</i>\r\n                </a>\r\n                {{??}}\r\n                <a href="javascript:void(0);" class="f-edit-button f-edit-pic-button" >\r\n                    <i class="iconfont">&#xe60f;</i>\r\n                    <input type="file" data-action="add-picture"/>\r\n                </a>\r\n                {{?}}\r\n            </div>\r\n        </div>\r\n        <div class="f-control-group">\r\n            <div class="f-control">\r\n                <label>图片链接</label>\r\n                <div class="f-grid">\r\n                    <input type="text" class="f-input" data-name="url" {{?it.url == "http://www.kuaizhan.com/"}}placeholder="{{!it.url}}"{{??it.url == ""}}placeholder="http://www.kuaizhan.com/"it.url = "http://www.kuaizhan.com/"{{??}}value="{{!it.url}}{{?}}">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <em option-name="id_picture" style="display:none"></em>\r\n    </fieldset>'}),define("text!template/form_setting/picture_del_item.html!strip",[],function(){return'<div class="f-control f-setting-option">\r\n    <label>选择图片</label>\r\n    <div class="f-grid">\r\n        <input type="text" class="f-input" placeholder="请选择小于5M的文件进行上传" data-name="name" readonly="readonly">\r\n    </div>\r\n    <a href="javascript:void(0);" class="f-edit-button f-edit-pic-button f-edit-delpic-button" data-action="del-picture">\r\n        <i class="iconfont">&#xe60e;</i>\r\n    </a>\r\n    <img style="display:none" src="{{=it.img}}" />\r\n</div>\r\n'}),define("text!template/form_setting/picture_item.html!strip",[],function(){return'<div class="f-control f-setting-option">\r\n    <label>选择图片</label>\r\n    <div class="f-grid">\r\n        <input type="text" class="f-input" placeholder="请选择小于5M的文件进行上传" data-name="name" readonly="readonly">\r\n    </div>\r\n    {{?it.img}}\r\n    <a href="javascript:void(0);" class="f-edit-button f-edit-pic-button" >\r\n        <i class="iconfont">&#xe60f;</i>\r\n        <input type="file" data-action="add-picture"/>\r\n    </a>\r\n    {{?}}\r\n</div>\r\n'}),define("text!template/sidebar.html!strip",[],function(){return'<dl class="f-side-nav">\n    <dt>表单管理</dt>\n    {{~it:list}}\n	    {{?list.published}}\n	    <dd data-id="{{=list.id}}" data-date="{{=list.created_at}}"><span data-action="survey-stat">{{!list.title}}<!-- <i class="f-red-doc"></i> --></span><em class="iconfont" data-action="del-survey">&#xe611;</em></dd>\n	    {{??}}\n	    <dd data-id="{{=list.id}}"><span data-action="show-survey">{{!list.title}}(未发布)</span><em class="iconfont" data-action="del-survey">&#xe611;</em></dd>\n	    {{?}}\n    {{~}}\n</dl>\n<div class="f-side-btn">\n    <a href="javascript:void(0);" class="f-btn" data-action="creat-form">新 建</a>\n</div>'}),define("text!template/form_edit.html!strip",[],function(){return'<div class="f-edit-clip">\n<div class="f-clip-wrap">\n\n<div class="f-mold f-header-opt">\n    <nav class="f-b-nav">\n        <ul class="clearfix">\n            <li class="curr">\n                <i class="iconfont">&#xe600;</i>\n                <em>头部设置</em>\n            </li>\n            <li>\n                <i class="iconfont">&#xe606;</i>\n                <em>内容编辑</em>\n            </li>\n            <li>\n                <i class="iconfont">&#xe603;</i>\n                <em>管理设置</em>\n            </li>\n        </ul>\n    </nav>\n    <fieldset class="f-fieldset f-header">\n        <div class="f-control-group" id="form_title_ipt">\n            <div class="f-control" >\n                <label>表单标题</label>\n                <input class="f-input" type="text" data-type="form-title" {{?it.title == \'请输入表单标题\'}}placeholder="{{=it.title}}"{{??}}value="{{=it.title}}{{?}}" >\n            </div>\n            <div class="f-control-tips">\n                <label>提示</label>\n                <em>已经输入<span>0</span>个字，最多可输入15个字</em>\n            </div>\n        </div>\n        <div class="f-control-group" id="form_subtitle_ipt">\n            <div class="f-control">\n                <label>表单副标题</label>\n                <textarea class="f-textarea" data-type="form-title" {{?it.subtitle == \'请输入表单副标题\'}}placeholder="{{=it.subtitle}}"{{?}}>{{?it.subtitle != \'请输入表单副标题\'}}{{=it.subtitle}}{{?}}</textarea>\n            </div>\n            <div class="f-control-tips">\n                <label>提示</label>\n                <em>已经输入<span>0</span>个字，最多可输入100个字</em>\n            </div>\n        </div>\n    </fieldset>\n    <div class="f-btn-wrap f-form-edit-btn">\n        <a class="f-btn f-btn-blue" href="#" data-action="next">下一步</a>\n    </div>\n</div>\n\n\n<div class="f-mold f-body-opt">\n    <nav class="f-b-nav">\n        <ul class="clearfix">\n            <li >\n                <i class="iconfont">&#xe600;</i>\n                <em>头部设置</em>\n            </li>\n            <li class="curr">\n                <i class="iconfont">&#xe606;</i>\n                <em>内容编辑</em>\n            </li>\n            <li>\n                <i class="iconfont">&#xe603;</i>\n                <em>管理设置</em>\n            </li>\n        </ul>\n    </nav>\n    <div class="f-body-wrap">\n        <div class="f-mold f-form-view-bg f-scroll">\n                <article class="f-form-view">\n                        <section class="f-title">\n                            <h1>{{!it.title}}</h1>\n                            <p>{{!it.subtitle}}</p>   \n                        </section>\n                        <div class="f-form-item-list">\n                             <section class="f-add-section">\n                                 <div class="f-add-text">\n                                     <i class="iconfont">&#xe604;</i>\n                                     <em>添加表单项</em>\n                                 </div>\n                                 <div class="f-add-button">\n                                     <a href="javascript:void(0);" data-action="add-input">文本输入</a>\n                                     <a href="javascript:void(0);" data-action="add-checkbox">选择项</a>\n                                     <a href="javascript:void(0);" data-action="add-select">下拉菜单</a>\n                                     <a href="javascript:void(0);" data-action="add-line">分割线</a>\n                                     <a href="javascript:void(0);" data-action="add-image">上传图片</a>\n                                     <a href="javascript:void(0);" data-action="add-picture">插入图片</a>\n                                 </div>\n                             </section>\n                        </div>\n                </article>\n        </div>\n        <div class="f-form-setting">\n        </div>\n    </div>\n    <div class="f-btn-wrap f-form-edit-btn">\n        <a class="f-btn f-btn-gery" href="#"  data-action="pre">上一步</a>\n        <a class="f-btn f-btn-gery" href="#"  data-action="creat">存草稿</a>\n        <a class="f-btn f-btn-blue" href="#"  data-action="next">下一步</a>\n    </div>\n</div>\n\n\n\n<div class="f-mold f-option-opt">\n    <nav class="f-b-nav">\n        <ul class="clearfix">\n            <li >\n                <i class="iconfont">&#xe600;</i>\n                <em>头部设置</em>\n            </li>\n            <li>\n                <i class="iconfont">&#xe606;</i>\n                <em>内容编辑</em>\n            </li>\n            <li class="curr">\n                <i class="iconfont">&#xe603;</i>\n                <em>管理设置</em>\n            </li>\n        </ul>\n    </nav>\n    <div class="f-option-wrap">\n        <fieldset class="f-fieldset">\n            <div class="f-control-group">\n                <div class="f-control">\n                    <label>提交后链接到</label>\n                    <div class="f-grid" id="f_select_opt">\n                        <div class="f-select">\n                            <em data-type="select-page">选择页面</em>\n                            <i class="iconfont">&#xe601;</i>\n                            <ul class="f-option-list">\n                                <li class="f-option" data-action="option" data-type="select-page">选择页面</li>\n                                <li class="f-option" data-action="option" data-type="select-doc">选择文章</li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="f-grid" id="f_selectpage" style="display: block">\n                        <div class="f-select">\n                            <em page-id="{{=it.KZpages[0].id}}">{{!it.KZpages[0].title}}</em>\n                            <i class="iconfont">&#xe601;</i>\n                            <ul class="f-option-list">\n                                <li class="f-option" data-action="option" page-id="none">选择页面</li>\n                                {{~it.KZpages:page}}\n                                <li class="f-option" data-action="option" page-id="{{=page.id}}">{{!page.title}}</li>\n                                {{~}}\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="f-grid" id="f_selectdoc" style="display: none">\n                        <div class="f-search-doc">\n                            <input type="text" class="f-input" data-action="show-doc-list" />\n                            \n                        </div>\n                    </div>\n                </div>\n                <div class="f-control-tips">\n                    <label>提示</label>\n                    <em>发布时需要选择提交完毕链接到的页面或者文章</em>\n                </div>\n            </div>\n        </fieldset>\n    </div>\n    <div class="f-btn-wrap f-form-edit-btn">\n        <a class="f-btn f-btn-gery" href="#" data-action="pre">上一步</a>\n        <a class="f-btn f-btn-gery" href="#" data-action="creat">存草稿</a>\n        <a class="f-btn f-btn-gery" href="#" data-action="publish">发布</a>\n    </div>\n</div>\n\n</div>\n</div>'}),define("text!template/complate.html!strip",[],function(){return'<div class="f-complete-wrap">\n    <div class="f-p-tips"><i class="iconfont">&#xe612;</i>您的表单已经生成，您可以通过拖拽高级表单组件或者在其他组件中添加链接的方式插入您的表单，或采用其他方式分享。</div>\n    <section class="f-section-control">\n        <h2 class="f-s-title">高级表单组件添加</h2>\n        <div class="f-figure">\n            <div class="f-img-ctrl f-form-icon"></div>\n            <div class="f-caption">\n                <div class="f-c-con">在页面中拖入高级表单组件即可插入已发布的任意表单</div>\n                <div class="f-c-con">\n                    <a class="f-btn f-btn-blue" href="/pageui/?site_id={{=it.siteId}}">前往页面添加</a>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section class="f-section-control">\n        <h2 class="f-s-title">二维码分享</h2>\n        <div class="f-figure">\n            <div class="f-img-ctrl"><img src="http://form.kuaizhan.com/forms/{{=it.id}}/qrcode" id="f_qrcode"></div>\n            <div class="f-caption">\n                <div class="f-c-con">点击下列按钮即可分享二维码，扫码可直接填写</div>\n                <div class="f-c-con">\n                    <ul class="f-list">\n                        <li class="f-outside-wx f-list-item">\n                            <i class="iconfont">&#xe608;</i>\n                            <div class="f-arrow-tips">微信扫描二维码有惊喜</div>\n                        </li>\n                        <li class="f-outside-wb f-list-item"><i class="iconfont">&#xe607;</i></li>\n                        <li class="f-outside-rr f-list-item"><i class="iconfont">&#xe60b;</i></li>\n                        <li class="f-outside-qz f-list-item"><i class="iconfont">&#xe60c;</i></li>\n                        <li class="f-outside-db f-list-item"><i class="iconfont">&#xe609;</i></li>\n                        <li class="f-outside-qwb f-list-item"><i class="iconfont">&#xe60d;</i></li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section class="f-section-control">\n        <h2 class="f-s-title">独立页面链接</h2>\n        <div class="f-figure">\n            <div class="f-caption">\n                <div class="f-c-con">\n                    <div class="f-list">\n                        <input type="text" class="f-list-item f-complate-input" value="http://form.kuaizhan.com/forms/{{=it.id}}" />\n                        <a href="javascript:void(0);" class="f-list-item" id="f-copy-url">复制链接</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n    <div class="f-btn-wrap">\n        <a class="f-btn f-btn-blue" href="http://form.kuaizhan.com/forms/{{=it.id}}" target="_blank">填写测试</a>\n    </div>\n</div>'}),define("text!template/form_answers.html!strip",[],function(){return'{{?it.dataList.length > 0}}\n<div class="f-view-wrap">\n    <ul class="f-view-tab">\n        <li class="curr"><a href="javascript:void(0);" data-action="show-answer-page">反馈查看</a></li>\n        <li ><a href="javascript:void(0);" data-action="show-table-page">统计数据</a></li>\n    </ul>\n    <div class="f-mold f-view f-model" page-id="answer">\n        <section class="f-model-title">\n            <div class="f-title">\n                <h1>{{!it.dataList[0].title}}</h1>\n                <span>{{=it.date}}&nbsp;&nbsp;&nbsp;&nbsp;共<em>{{=it.totalCount}}</em>条</span>   \n            </div>\n            <div class="f-title-btn f-end">\n                <a class="f-btn f-btn-blue" data-action="export" href="javascript:void(0);">导出Excel</a>\n                <a class="f-btn f-btn-blue" data-action="open-share" href="javascript:void(0);">分享表单</a>\n            </div>\n        </section>\n        <div class="f-model-wrap">\n            <div class="f-model-body">\n                <div class="f-model-nav">\n                    <div class="f-model-edit">\n                        <ul class="f-model-tab">\n                            <li select-type="all" {{?it.other == \'all\'}}class="curr"{{?}}><a href="javascript:void(0);">全部</a></li>\n                            <li select-type="star" {{?it.other == \'star\'}}class="curr"{{?}}><a href="javascript:void(0);">星标</a></li>\n                            <li select-type="done" {{?it.other == \'done\'}}class="curr"{{?}}><a href="javascript:void(0);">未处理</a></li>\n                            <li select-type="unread" {{?it.other == \'unread\'}}class="curr"{{?}}><a href="javascript:void(0);">未读</a></li>\n                        </ul>\n                        <a href="javascript:void(0);" class="f-btn" data-action="{{?it.reverse}}reverse{{?}}{{?it.sort}}sort{{?}}">{{?it.reverse}}倒序<i class=iconfont>&#xe619;</i>{{?}}{{?it.sort}}升序<i class=iconfont>&#xe618;</i>{{?}}</a>\n                    </div>\n                    <div class="f-model-list"></div>\n                </div>\n                <div class="f-model-show">\n                    <div class="f-show-con f-scroll"></div>\n                </div>\n            </div>\n            <div class="f-model-paging">\n                    \n            </div>\n        </div>\n    </div>\n    <div class="f-mold f-view f-table" page-id="table" style="display:none">\n        \n    </div>\n</div>\n{{??it.range}}\n<div class="f-view-wrap">\n    <ul class="f-view-tab">\n        <li class="curr"><a href="javascript:void(0);">反馈查看</a></li>\n        <!-- <li ><a href="javascript:void(0);">统计数据</a></li> -->\n    </ul>\n    <div class="f-mold f-view f-model" page-id="answer">\n        <section class="f-model-title">\n            <div class="f-title">\n                <h1>{{=it.title}}</h1>\n                <span>{{=it.date}}&nbsp;&nbsp;&nbsp;&nbsp;暂无反馈</span>   \n            </div>\n            <div class="f-title-btn f-end">\n                <a class="f-btn f-btn-diseble" href="javascript:void(0);">导出Excel</a>\n                <a class="f-btn f-btn-blue" data-action = "open-share" href="javascript:void(0);">分享表单</a>\n            </div>\n        </section>\n        <div class="f-model-wrap">\n            <div class="f-model-body">\n            <div class="f-model-nav">\n                <div class="f-model-edit">\n                    <ul class="f-model-tab">\n                        <li class="curr"><a href="javascript:void(0);">全部</a></li>\n                        <li><a href="javascript:void(0);">星标</a></li>\n                        <li><a href="javascript:void(0);">未处理</a></li>\n                        <li><a href="javascript:void(0);">未读</a></li>\n                    </ul>\n                    <a href="javascript:void(0);" class="f-btn f-btn-diseble">升序<i class=iconfont>&#xe618;</i></a>\n                </div>\n                <div class="f-model-list">\n                    \n                </div>\n            </div>\n                <div class="f-model-show">\n                    <div class="f-show-con f-scroll">\n\n                    </div>\n                </div>\n            </div>\n            <div class="f-model-paging">\n                    \n            </div>\n        </div>\n    </div>\n    <div class="f-mold f-view f-table" page-id="table" style="display:none">\n        \n    </div>\n</div>\n{{??}}\n<div class="f-view-wrap">\n    <ul class="f-view-tab">\n        <li class="curr"><a href="javascript:void(0);" data-action="show-answer-page">反馈查看</a></li>\n        <li ><a href="javascript:void(0);" data-action="show-table-page">统计数据</a></li>\n    </ul>\n    <div class="f-mold f-view f-model" page-id="answer">\n        <section class="f-model-title">\n            <div class="f-title">\n                <h1>当前没有记录</h1>\n                <span>共<em>0</em>条</span>   \n            </div>\n            <div class="f-title-btn f-end">\n                <a class="f-btn f-btn-blue" data-action="export" href="javascript:void(0);">导出Excel</a>\n                <a class="f-btn f-btn-blue" data-action = "open-share" href="javascript:void(0);">分享表单</a>\n            </div>\n        </section>\n        <div class="f-model-wrap">\n            <div class="f-model-body">\n            <div class="f-model-nav">\n                <div class="f-model-edit">\n                    <ul class="f-model-tab">\n                        <li select-type="all" {{?it.other == \'all\'}}class="curr"{{?}}><a href="javascript:void(0);">全部</a></li>\n                        <li select-type="star" {{?it.other == \'star\'}}class="curr"{{?}}><a href="javascript:void(0);">星标</a></li>\n                        <li select-type="done" {{?it.other == \'done\'}}class="curr"{{?}}><a href="javascript:void(0);">未处理</a></li>\n                        <li select-type="unread" {{?it.other == \'unread\'}}class="curr"{{?}}><a href="javascript:void(0);">未读</a></li>\n                    </ul>\n                    <a href="javascript:void(0);" class="f-btn f-btn-diseble">升序<i class=iconfont>&#xe618;</i></a>\n                </div>\n                <div class="f-model-list">\n                    \n                </div>\n            </div>\n                <div class="f-model-show">\n                    <div class="f-show-con f-scroll">\n\n                    </div>\n                </div>\n            </div>\n            <div class="f-model-paging">\n                    \n            </div>\n        </div>\n    </div>\n    <div class="f-mold f-view f-table" page-id="table" style="display:none">\n        \n    </div>\n</div>\n{{?}}\n'}),define("text!template/answers/answer.html!strip",[],function(){return'<div class="f-show-con f-scroll" data-id="{{=it.id}}" data-star="{{=it.star}}" data-done="{{=it.done}}">\n{{?it.showTitle}}<h3>{{!it.title}}</h3>{{??}}<h3>反馈结果</h3>{{?}}\n{{~it.fields:list}}\n{{?list.name == \'id_checkbox\'}}\n        <section class="f-form-item">\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                {{~list.value:item}}\n                <div class="f-control">\n                    <label>\n                        {{?item.selected}}\n                        <input type="checkbox" checked="checked" />\n                        {{??}}\n                        <input type="checkbox" />\n                        {{?}}\n                        <span>{{!item.name}}</span>\n                    </label>\n                </div>\n                {{~}}\n            </div>\n            <div class="f-item-mask"></div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_image_checkbox\'}}\n        <section class="f-form-item" >\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                {{~list.value:item}}\n                <div class="f-control" >\n                    <label>\n                        {{?item.selected}}\n                        <input type="checkbox" checked="checked" />\n                        {{??}}\n                        <input type="checkbox" />\n                        {{?}}\n                        {{?item.img}}\n                        <em class="f-img"><img src="{{=item.img}}"></em>\n                        {{?}}\n                        <span>{{!item.name}}</span>\n                    </label>\n                </div>\n                {{~}}\n            </div>\n            <div class="f-item-mask" ></div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_radio\'}}\n        <section class="f-form-item" >\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                {{~list.value:item}}\n                <div class="f-control">\n                    <label>\n                        {{?item.selected}}\n                        <input type="radio" checked="checked" />\n                        {{??}}\n                        <input type="radio" />\n                        {{?}}\n                        <span>{{!item.name}}</span>\n                    </label>\n                </div>\n                {{~}}\n            </div>\n            <div class="f-item-mask" ></div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_image_radio\'}}\n        <section class="f-form-item"  >\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                {{~list.value:item}}\n                <div class="f-control" >\n                    <label>\n                        {{?item.selected}}\n                        <input type="radio" checked="checked" />\n                        {{??}}\n                        <input type="radio" />\n                        {{?}}\n                        {{?item.img}}\n                        <em class="f-img"><img src="{{=item.img}}"></em>\n                        {{?}}\n                        <span>{{!item.name}}</span>\n                    </label>\n                </div>\n                {{~}}\n            </div>\n            <div class="f-item-mask" ></div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_section\'}}\n        <section class="f-form-item">\n            <h2><em>{{!list.title}}</em></h2>\n            <div class="f-item-wrap">\n                <div class="f-control">\n                    <hr class="f-line" />\n                </div>\n            </div>\n            <div class="f-item-mask" ></div>\n        </section>\n    {{?}} \n    {{?list.name == \'id_text\'}}\n        <section class="f-form-item">\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                <div class="f-control">\n                {{?list.value}}\n                <div class="f-input-div">{{!list.value}}</div>\n                {{??}}\n                <input type="text"  data-name="text" value="" />\n                {{?}}\n                </div>\n            </div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_textarea\'}}\n        <section class="f-form-item" >\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                <div class="f-control">\n                {{?list.value}}\n                    <textarea  data-name="text">{{!list.value}}</textarea>\n                {{??}}\n                <textarea  data-name="text"></textarea>\n                {{?}}\n                </div>\n            </div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_dropdown\'}}\n        <section class="f-form-item"  >\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                <div class="f-control">\n                    <div class="f-select">\n                        <em>请选择</em>\n                        <i class="iconfont">&#xe601;</i>\n                    </div>\n                     <ul class="f-option-list" style="display: block" data-type="select">\n                            {{~list.value:item}}\n                            <li class="option {{?item.selected}}curr{{?}}">{{!item.name}}</li>\n                            {{~}}\n                    </ul>\n                </div>\n            </div>\n            <div class="f-item-mask"></div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_image\'}}\n        <section class="f-form-item"  >\n            <h2><em>{{!list.title}}</em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n            <div class="f-item-wrap">\n                <div class="f-description"><span>{{!list.description}}</span></div>\n                <div class="f-control">\n                    <span class="f-span">选择图片</span>\n                    <input type="file" class="file-image" data-name="fileImage" data-action="add-image" size="28" />\n                    <div class="image-style">\n                        <a href="javascript:void(0);">\n                            {{?list.img}}\n                            <img class="f-img" src="{{=list.img}}" />\n                            {{?}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="f-item-mask"></div>\n        </section>\n    {{?}}\n    {{?list.name == \'id_picture\'}}\n        <section class="f-form-item" >\n            <div class="f-item-wrap">\n                <div class="f-control">\n                    <a href="{{=list.url}}">\n                        {{?list.img}}\n                        <img class="f-image" src="{{=list.img}}" />\n                        {{?}}\n                    </a>\n                </div>\n                <div class="f-descriptions"><span>{{!list.descriptions}}</span></div>\n            </div>\n            <div class="f-item-mask"></div>\n        </section>\n    {{?}}\n{{~}}\n</div>\n<div class="f-btn-wrap">\n    <a href="javascript:void(0);" class="f-btn" data-action="getstar"><i class="iconfont">&#xe610;</i><span>{{?it.star}}取消星标{{??}}星标{{?}}</span></a>\n    <a href="javascript:void(0);"  class="f-btn" data-action="done"><i class="iconfont">&#xe612;</i><span>{{?it.done}}取消处理{{??}}处理{{?}}</span></a>\n    <a href="javascript:void(0);"  class="f-btn" data-action="delete"><i class="iconfont">&#xe611;</i><span>删除</span></a>\n</div>';
}),define("text!template/answers/answers.html!strip!",[],function(){return'{{?it.totalCount > 0}}\n<table>\n{{~it.dataList:list}}\n    <tr data-action="show-answer" data-id="{{=list.id}}">\n        <td class="f-doc-td">{{?list.unread}}<i class="f-doc"></i>{{?}}</td>\n        <td class="f-num-td">{{=list.no}}</td>\n        <td class="f-date">{{=list.date}}</td>\n        <td class="f-star">{{?list.star}}<i class="iconfont">&#xe610;</i>{{?}}</td>\n        <td class="f-selected">{{?list.done}}<i class="iconfont">&#xe612;</i>{{?}}</td>\n    </tr>\n{{~}}\n</table>\n{{??it.range}}\n<div class="f-model-list-empty">\n    <div class="f-model-list-empty-wrap">\n        <div class="f-model-list-empty-inner">\n            <i class="iconfont">&#xe617;</i>\n        </div>\n    </div>\n    <p>此表单暂时还没有用户提交反馈结果。</p>\n</div>\n<div class="f-mofel-list-tips">\n	<span>Tips</span>\n	点击右上方 <em>分享表单</em> 一键分享此表单至其他平台，用户点击链接即可填写并提交哦！\n</div>\n{{??}}\n<div class="f-model-list-empty">\n    <p class="f-model-list-empty-select">没有记录</p>\n</div>\n{{?}}'}),define("text!template/answers/text.html!strip",[],function(){return'<article class="f-modal f-text-answer">\n	<div class="f-modal-title">\n		<h3>答案列表</h3>\n		<!-- <div class="f-title-btn"><a href="javascript:void(0);" class="f-btn f-btn-blue">导出Excel</a> </div> -->\n	</div>\n	<div class="f-modal-body">\n		<div class="f-text-list">\n			<table>\n				<tr>\n					<th class="f-text-no">问卷序号</th>\n					<th>答案</th>\n					<!-- <th class="f-text-btn">查看详情</th> -->\n				</tr>\n				{{~it.dataList:list}}\n				<tr>\n					<td class="f-text-no">{{=list.no}}</td>\n					<td>{{!list.value}}</td>\n					<!-- <td class="f-text-btn"></td> -->\n				</tr>\n				{{~}}\n			</table>\n		</div>\n		<div class="f-answers-paging">\n                    \n        </div>\n	</div>\n	<a href="javascript:void(0);" data-action="close-modal" class="f-close-modal"><i class="iconfont">&#xe605;</i></a>\n</article>\n<div class="f-modal-mask" data-action="remove-modal"></div>'}),define("text!template/answers/share.html!strip",[],function(){return'<article class="f-modal f-share-dlg">\n	<div class="f-modal-body f-share-body">\n		<div class="f-share-left">\n			<div class="f-share-left-top">\n				<div class="f-share-left-flex">\n					<h2>分享到微信</h2>\n					<p class="f-share-left-title">\n						{{!it.title}}\n					</p>\n					<p class="f-share-left-link">\n						<a href="http://form.kuaizhan.com/forms/{{=it.surveyId}}">http://form.kuaizhan.com/forms/{{=it.surveyId}}</a>\n						<a href="javascript:void(0);" id="share_dlg_clip">复制链接</a>\n					</p>\n					<p class="f-share-left-tips">Tips:点击此链接即可直接填写表单并提交哦！</p>\n				</div>\n				<div class="f-share-left-qc">\n					<img src="http://form.kuaizhan.com/forms/{{=it.surveyId}}/qrcode" />\n				</div>\n			</div>\n			<div class="f-share-left-text">\n				<div class="f-share-left-text-title">\n					用微信“扫一扫”二维码即可将表单分享给您的好朋友或朋友圈\n				</div>\n				<div class="f-share-left-img"></div>\n			</div>\n		</div>\n		<div class="f-share-right">\n			<h2>分享到其他平台</h2>\n			<ul>\n				<li><a href="javascript:void(0);" class="f-outside-wb iconfont">&#xe607;</a></li>\n				<li><a href="javascript:void(0);" class="f-outside-qz iconfont">&#xe60c;</a></li>\n				<li><a href="javascript:void(0);" class="f-outside-rr iconfont">&#xe60b;</a></li>\n				<li><a href="javascript:void(0);" class="f-outside-qwb iconfont">&#xe60d;</a></li>\n				<li><a href="javascript:void(0);" class="f-outside-db iconfont">&#xe609;</a></li>\n			</ul>\n		</div>\n	</div>\n	<a href="javascript:void(0);" data-action="close-modal" class="f-close-modal"><i class="iconfont">&#xe605;</i></a>\n</article>\n<div class="f-modal-mask" data-action="remove-modal"></div>'}),define("text!template/table/table.html!strip",[],function(){return'<div class="f-table-wrap">\n    <div class="f-table-box" id="answerCanvas"></div>\n\n    {{~it.fields:list}}\n        {{?list.name == \'id_checkbox\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>选择题</em>\n                    <em>多选</em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                {{~list.value:item}}\n                <tr>\n                    <td class="f-table-lebel">{{!item.name}}</td>\n                    <td class="f-table-num">{{=item.selected_count}}</td>\n                    <td class="f-table-progress">\n                        <progress value="{{=Math.floor((item.selected_count / list.valCount)*100)}}" max="100"></progress>\n                        <span>{{?list.valCount <= 0}}0%{{??}}{{=Math.floor((item.selected_count / list.valCount)*100)}}%{{?}}</span>   \n                    </td>\n                </tr>\n                {{~}}\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_image_checkbox\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>选择题</em>\n                    <em>多选</em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                {{~list.value:item}}\n                <tr>\n                    <td class="f-table-lebel">{{!item.name}}</td>\n                    <td class="f-table-num">{{=item.selected_count}}</td>\n                    <td class="f-table-progress">\n                        <progress value="{{=Math.floor((item.selected_count / list.valCount)*100)}}" max="100"></progress>\n                        <span>{{=Math.floor((item.selected_count / list.valCount)*100)}}%</span>  \n                    </td>\n                </tr>\n                {{~}}\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_radio\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>选择题</em>\n                    <em>单选</em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                {{~list.value:item}}\n                <tr>\n                    <td class="f-table-lebel">{{!item.name}}</td>\n                    <td class="f-table-num">{{=item.selected_count}}</td>\n                    <td class="f-table-progress">\n                        <progress value="{{=Math.floor((item.selected_count / list.valCount)*100)}}" max="100"></progress>\n                        <span>{{=Math.floor((item.selected_count / list.valCount)*100)}}%</span>  \n                    </td>\n                </tr>\n                {{~}}\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_image_radio\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>选择题</em>\n                    <em>单选</em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                {{~list.value:item}}\n                <tr>\n                    <td class="f-table-lebel">{{!item.name}}</td>\n                    <td class="f-table-num">{{=item.selected_count}}</td>\n                    <td class="f-table-progress">\n                        <progress value="{{=Math.floor((item.selected_count / list.valCount)*100)}}" max="100"></progress>\n                        <span>{{=Math.floor((item.selected_count / list.valCount)*100)}}%</span>  \n                    </td>\n                </tr>\n                {{~}}\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_section\'}}\n        {{?}}\n        {{?list.name == \'id_picture\'}}\n        {{?}}\n        {{?list.name == \'id_text\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>单文本</em>\n                    <em></em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                <tr>\n                    <td class="f-table-lebel"><a href="javascript:void(0);" data-lid="{{=list.id}}" data-action="show-text">查看内容</a></td>\n                    <td class="f-table-num"></td>\n                    <td class="f-table-progress">\n                    </td>\n                </tr>\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_textarea\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>多文本</em>\n                    <em></em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                <tr>\n                    <td class="f-table-lebel"><a href="javascript:void(0);" data-lid="{{=list.id}}" data-action="show-text">查看内容</a></td>\n                    <td class="f-table-num"></td>\n                    <td class="f-table-progress">\n                    </td>\n                </tr>\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_dropdown\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>选择题</em>\n                    <em>单选</em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                {{~list.value:item}}\n                <tr>\n                    <td class="f-table-lebel">{{!item.name}}</td>\n                    <td class="f-table-num">{{=item.selected_count}}</td>\n                    <td class="f-table-progress">\n                        <progress value="{{=Math.floor((item.selected_count / list.valCount)*100)}}" max="100"></progress>\n                        <span>{{=Math.floor((item.selected_count / list.valCount)*100)}}%</span>  \n                    </td>\n                </tr>\n                {{~}}\n            </table>\n        </section>\n        {{?}}\n        {{?list.name == \'id_image\'}}\n        <section class="f-table-section">\n            <div class="f-table-section-title">\n                <h2>{{!list.title}}</h2>\n                <div class="f-table-section-type">\n                    <em>传照片</em>\n                    <em></em>\n                    <em>{{?list.required}}必选项{{??}}选填项{{?}}</em>\n                </div>\n            </div>\n            <table>\n                <tr>\n                    <td class="f-table-lebel"><a href="javascript:void(0);" data-lid="{{=list.id}}" data-action="show-text">查看照片</a></td>\n                    <td class="f-table-num"></td>\n                    <td class="f-table-progress">\n                    </td>\n                </tr>\n            </table>\n        </section>\n        {{?}}\n    {{~}}\n</div>\n\n\n\n'}),define("text!template/pageNav.html!strip",[],function(){return'<ul class="f-paging">\n	<li><a href="javascript:void(0);" {{?it.noPre}}class="hide"{{?}}  data-page="{{=it.pre}}" data-action="gotopage">上一页</a></li>\n	<li><a href="javascript:void(0);" {{?it.noPre}}class="hide"{{?}}  data-page="{{=it.first}}" data-action="gotopage">首页</a></li>\n	{{~it.pages:page}}\n		{{?page.currentPage}}\n		<li><a class="curr" href="javascript:void(0);" >{{=page.num}}</a></li>\n		{{??}}\n		<li><a href="javascript:void(0);"  data-page="{{=page.num}}" data-action="gotopage">{{=page.num}}</a></li>\n		{{?}}\n	{{~}}\n	<li><a href="javascript:void(0);" {{?it.noNext}}class="hide"{{?}}   data-page="{{=it.last}}" data-action="gotopage">尾页</a></li>\n	<li><a href="javascript:void(0);" {{?it.noNext}}class="hide"{{?}}   data-page="{{=it.next}}" data-action="gotopage">下一页</a></li>\n	<li>共{{=it.max}}页</li>\n</ul>'}),define("module/formEdit",["util/doT","util/ajax","util/select","util/alert","util/share","text!template/form_item/checkbox.html!strip","text!template/form_item/input.html!strip","text!template/form_item/line.html!strip","text!template/form_item/radio.html!strip","text!template/form_item/select.html!strip","text!template/form_item/textarea.html!strip","text!template/form_item/item_list.html!strip","text!template/form_item/image.html!strip","text!template/form_item/picture.html!strip","text!template/form_setting/checkbox.html!strip","text!template/form_setting/line.html!strip","text!template/form_setting/select.html!strip","text!template/form_setting/text.html!strip","text!template/form_setting/select_item.html!strip","text!template/form_setting/select_del_item.html!strip","text!template/form_setting/search_page.html!strip","text!template/form_setting/image.html!strip","text!template/form_setting/picture.html!strip","text!template/form_setting/picture_del_item.html!strip","text!template/form_setting/picture_item.html!strip","text!template/sidebar.html!strip","text!template/form_edit.html!strip","text!template/complate.html!strip","text!template/form_answers.html!strip","text!template/answers/answer.html!strip","text!template/answers/answers.html!strip!","text!template/answers/text.html!strip","text!template/answers/share.html!strip","text!template/table/table.html!strip","text!template/pageNav.html!strip"],function(t,e,n,i,a,s,l,o,d,r,c,f,p,m,u,v,h,g,b,x,y,_,w,k,j,q,C,I,S,T,z,M,N,H,L){function R(){Mt=t.template(s),Nt=t.template(l),Ht=t.template(o),Lt=t.template(d),Rt=t.template(r),Wt=t.template(c),Ot=t.template(f),Pt=t.template(p),Bt=t.template(m),Et=t.template(u),At=t.template(v),Ut=t.template(h),Xt=t.template(g),Dt=t.template(b),Ft=t.template(x),Yt=t.template(_),Zt=t.template(w),Kt=t.template(k),Gt=t.template(j),Qt=t.template(q),ee=t.template(C),te=t.template(I),Vt=t.template(S),ne=t.template(T),ie=t.template(z),le=t.template(H),se=t.template(M),oe=t.template(L),Jt=t.template(y),ae=t.template(N),W(),E(),St()}function W(){me.empty(),$.getJSON("/pa/survey/surveys?site_id="+ve,{page_size:100,page_no:1},function(t){var e=t.data.dataList;me.append(Qt(e))})}function O(t,e){$.getJSON("/pageui/ajax-page-publish-list?site_id="+ve,function(n){if(n.data.items.length<1){var i='<div class="f-mold f-header-opt"><div class="f-header red">您还没有发布页面，请先 <a href="/pageui/?site_id='+ve+'">发布页面</a></div></div>';ue.empty(),ue.append(i)}else{if(ue.empty(),t)t.KZpages=n.data.items,ue.append(ee(t)),e();else{var a={};a.KZpages=n.data.items,a.title="请输入表单标题",a.subtitle="请输入表单副标题",ue.append(ee(a))}B(),A()}})}function P(){$("#f_select_opt").on("click",'[data-type="select-page"]',function(){$("#f_selectpage").show(),$("#f_selectdoc").hide()}).on("click",'[data-type="select-doc"]',function(){$("#f_selectpage").hide(),$("#f_selectdoc").show()});var t=$(".f-search-doc");t.on("keyup",'[data-action="show-doc-list"]',function(){var e=$('[data-action="show-doc-list"]').val();return""==e?($(".f-search-list")[0]&&$(".f-search-list").remove(),$('[data-action="show-doc-list"]').attr("data-docId",""),!1):void $.getJSON("/post/ajax-search-post?site_id="+ve+"&q="+e,function(e){$(".f-search-list").remove(),e.data.count>0&&t.append(Jt(e.data))})}).on("click",'[data-action="seach-item"]',function(){var t=$(this).attr("data-docId");$('[data-action="show-doc-list"]').val($(this).text()),$('[data-action="show-doc-list"]').attr("data-docId",t),$(".f-search-list").remove()})}function B(){fe=$(".f-form-view-bg",ue);var t=$(window).height()-$("header").outerHeight()-$(".f-b-nav").outerHeight()-$(".f-btn-wrap").outerHeight()-100;fe.height(t)}function E(){ht(),Ct()}function A(){ft(),D(),Q(),Z(),K(),et(),U(),nt(),P(),F()}function U(){var t=$(".f-form-edit-btn",ue),e=$(".f-clip-wrap",ue),n=0;t.on("click",'[data-action="next"]',function(){e.animate({"margin-left":n-920},300,function(){n-=920})}).on("click",'[data-action="pre"]',function(){e.animate({"margin-left":n+920},300,function(){n+=920})}).on("click",'[data-action="creat"]',function(){lt()}).on("click",'[data-action="publish"]',function(){ot()})}function X(t){re=$(".f-form-setting"),ce=$(".f-form-item-list"),re.empty(),ce.find('[current="true"]').removeAttr("current")}function D(){de=$(".f-add-section",ue),re=$(".f-form-setting",ue);var t={};t.title="默认标题",t.placeholder="默认文本",t.value=[{name:"默认选项"}],t.type="text",t["default"]="默认选项",t.required=1,t.description="",t.descriptions="输入对图片的相关描述",t.url="http://www.kuaizhan.com/",de.on("click",'[data-action="add-input"]',function(){X(),re.append(Xt(t)),de.before(Nt(t)),Y(),pe=!1}).on("click",'[data-action="add-checkbox"]',function(){X(),re.append(Et(t)),de.before(Mt(t)),Y(),pe=!1}).on("click",'[data-action="add-select"]',function(){X(),re.append(Ut(t)),de.before(Rt(t)),Y(),pe=!1}).on("click",'[data-action="add-line"]',function(){X(),re.append(At(t)),de.before(Ht(t)),Y(),pe=!1}).on("click",'[data-action="add-image"]',function(){X(),re.append(Yt(t)),de.before(Pt(t)),Y(),pe=!1}).on("click",'[data-action="add-picture"]',function(){X(),re.append(Zt(t)),de.before(Bt(t)),Y(),pe=!1})}function F(){$("#form_title_ipt").find("input").on("keyup focusout",function(){J(this,15)}),$("#form_subtitle_ipt").find(".f-textarea").on("keyup focusout",function(){J(this,100)})}function J(t,e){var n=$(t),i=n.closest(".f-control-group").find(".f-control-tips").find("span");i.text(n.val().length),n.val().length>e?i.addClass("red"):i.hasClass("red")&&i.removeClass("red"),n.val(n.val().substring(0,e)),i.text(n.val().length),i.removeClass("red")}function Y(){fe=$(".f-form-view-bg"),ce=$(".f-form-item-list");var t=ce.height()-fe.height()+100;fe.scrollTop(t)}function Z(){re=$(".f-form-setting"),n.selectAction(re,tt)}function K(){var t=$(".f-option-opt");n.selectAction(t)}function G(t){var e=t.closest(".f-form-item"),n={};re=$(".f-form-setting"),ce=$(".f-form-item-list"),$('[current="true"]',ce).removeAttr("current"),t.closest(".f-form-item").attr("current","true"),re.empty(),("id_checkbox"==e.attr("data-name")||"id_radio"==e.attr("data-name"))&&(n.value=[],$.each($('[data-type="list"]',e).find("label"),function(t,e){n.value.push({name:$(e).find("span").text(),img:$(e).find("img").attr("src")})})),"id_dropdown"==e.attr("data-name")&&(n["default"]=$(".f-select",e).find("em").text(),n.value=[],$.each($('[data-type="select"]',e).find("li"),function(t,e){n.value.push({name:$(e).text()})})),"id_text"==e.attr("data-name")&&(n.type=e.find("input").attr("type")),"id_picture"==e.attr("data-name")&&(n.url=e.find("a").attr("href"),n.img=e.find("img").attr("src"),n.descriptions=e.find("span").text()),"id_image"==e.attr("data-name")&&(n.img=e.find("img").attr("src"),n.description=e.find(".f-description").find("span").text(),n.value=e.find("img").attr("src")),n.title=e.find("h2").find("em").text(),n.required=e.find("h2").find("span")[0]?1:0,n.name=e.attr("data-name"),n.placeholder="默认文本";var i={data:n};return i}function Q(){re=$(".f-form-setting"),ce=$(".f-form-item-list"),ce.on("click",'[data-name="id_text"]',function(){var t=$(this);re.append(Xt(G(t).data))}).on("click",'[data-name="id_textarea"]',function(){var t=$(this);re.append(Xt(G(t).data)),$("#f_text_type",re).hide()}).on("click",'[data-name="id_dropdown"]',function(){var t=$(this);re.append(Ut(G(t).data))}).on("click",'[data-name="id_radio"]',function(){var t=$(this);re.append(Et(G(t).data))}).on("click",'[data-name="id_checkbox"]',function(){var t=$(this);re.append(Et(G(t).data))}).on("click",'[data-name="id_section"]',function(){var t=$(this);re.append(At(G(t).data))}).on("click",'[data-name="id_image"]',function(){var t=$(this);re.append(Yt(G(t).data))}).on("click",'[data-name="id_picture"]',function(){var t=$(this);re.append(Zt(G(t).data))}).on("click",".f-item-del",function(){var t=$(this);return $('[data-type="curr"]',ce).removeAttr("data-type"),t.closest(".f-form-item").remove(),re.empty(),!1})}function V(){re=$(".f-form-setting"),ce=$(".f-form-item-list");var t={},e=$('[data-name="title"]').val(),n=$("[option-name]",re).attr("option-name");e?t.title=e:t.title=$('[data-name="title"]').attr("placeholder"),t.required=$("[data-required]",re).attr("data-required"),t.name=n,t.placeholder="默认文本",("id_checkbox"==n||"id_radio"==n)&&(t.value=[],$.each($(".f-setting-option",re).find('[data-name="option"]'),function(e,n){var i=$(n).closest(".f-setting-option").find("img").attr("src");$(n).val()?t.value.push({name:$(n).val(),img:i}):t.value.push({name:$(n).attr("placeholder"),img:i})})),"id_dropdown"==n&&(t.value=[],$.each($(".f-setting-option",re).find('[data-name="option"]'),function(e,n){$(n).val()?t.value.push({name:$(n).val()}):t.value.push({name:$(n).attr("placeholder")})}),t["default"]=t.value[0].name),"id_text"==n&&(t.type=$("[text-type]",re).attr("text-type")),"id_picture"==n&&(t.descriptions=$(".f-textarea",re).val(),t.img=$("img",re).attr("src"),t.url=$('[data-name="url"]',re).val()),"id_image"==n&&(t.description=$('[data-name="description"]').val(),t.img=$("img",re).attr("src"),t.value=$("img",re).attr("src"));var i={data:t};return i}function tt(){re=$(".f-form-setting"),ce=$(".f-form-item-list");var t,e=$("[option-name]",re).attr("option-name");"id_checkbox"==e&&(t=$('[current="true"]',ce),t.replaceWith(Mt(V().data))),"id_section"==e&&(t=$('[current="true"]',ce),t.replaceWith(Ht(V().data))),"id_text"==e&&(t=$('[current="true"]',ce),t.replaceWith(Nt(V().data))),"id_radio"==e&&(t=$('[current="true"]',ce),t.replaceWith(Lt(V().data))),"id_dropdown"==e&&(t=$('[current="true"]',ce),t.replaceWith(Rt(V().data))),"id_textarea"==e&&(t=$('[current="true"]',ce),t.replaceWith(Wt(V().data))),"id_image"==e&&(t=$('[current="true"]',ce),t.replaceWith(Pt(V().data))),"id_picture"==e&&(t=$('[current="true"]',ce),t.replaceWith(Bt(V().data)))}function et(){var t="<div class=f-form-view-mask></div>";re=$(".f-form-setting"),fe=$(".f-form-view-bg"),re.on("keyup focusout",'[type="text"]',function(){tt(),"title"==$(this).attr("data-name")?J(this,25):"option"==$(this).attr("data-name")?J(this,20):("description"==$(this).attr("data-name")||"descriptions"==$(this).attr("data-name"))&&J(this,100),pe=!1}).on("focusin",'[type="text"]',function(){fe.append(t)}).on("focusout",'[type="text"]',function(){tt(),$(".f-form-view-mask")&&$(".f-form-view-mask").remove()}),re.on("click",'[data-action="del-item"]',function(){var t=$(this);$(".f-setting-option",re).length>1?(t.closest(".f-setting-option").remove(),tt()):alert("最少需要有一个选项"),pe=!1}).on("click",'[data-action="add-item"]',function(){var t=$(this),e={};if($(".f-setting-option",re).length<10){var n=t.closest(".f-control-group");t.closest(".f-control-group").hasClass("f-control-group-select")?(e.img=!1,n.append(Dt(e))):(e.img=!0,n.append(Dt(e))),tt()}else alert("最多不可以超过10个选项");pe=!1}).on("change",'[data-action="add-pic"]',function(){pt(this),pe=!1}).on("click",'[data-action="del-pic"]',function(){mt(this),pe=!1}).on("change",'[data-action="add-picture"]',function(){ut(this),pe=!1}).on("click",'[data-action="del-picture"]',function(){vt(this),pe=!1}).on("click",'[option-name="id_text"]',function(){$("#f_text_type").show(),pe=!1}).on("click",'[option-name="id_textarea"]',function(){$("#f_text_type").hide(),pe=!1})}function nt(){var t,e,n=$(".f-title",$(".f-body-wrap")),i=$(".f-header",$(".f-header-opt")),a=$(".f-input",i),s=$(".f-textarea",i);i.on("focusout",".f-input",function(){var e=n.find("h1").text();t=a.val(),""==t?n.find("h1").text("请输入表单标题"):(n.find("h1").text(t),e!=t&&(pe=!1))}).on("focusout",".f-textarea",function(){var t=n.find("p").text();e=s.val(),""==e?n.find("p").text("请输入表单副标题"):n.find("p").text(e),t!=e&&(pe=!1)})}function it(t,e,n){return t.id=e,t.title=$(n).find("h2").find("em").text(),t.instruct="",$(n).find("h2").find("span")[0]?t.required=!0:t.required=!1,t}function at(t,e){var n=$(t).find("label");return $.each(n,function(t,n){var i={};i.lid=t,i.name=$(n).find("span").text(),i.img=$(n).find("em img").attr("src"),i.selected=!1,e.push(i)}),e}function st(){var t={},e=[],n=[];ce=$(".f-form-item-list"),fe=$(".f-form-view-bg");var i=$(".f-title",fe),a=$(".f-form-item",ce);$.each(a,function(t,i){var a,s=$(i).attr("data-name"),l=!1;if($(i).find("img").length>0&&(l=!0),"id_checkbox"==s&&(n=[],a={},l?a.name="id_image_checkbox":a.name="id_checkbox",it(a,t,i),at(i,n),a.value=n),"id_radio"==s&&(n=[],a={},l?a.name="id_image_radio":a.name="id_radio",it(a,t,i),at(i,n),a.value=n),"id_section"==s&&(a={},a.name="id_section",a.id=t,a.title=$(i).find("h2").find("em").text()),"id_text"==s&&(a={},a.name="id_text",a.type=$(i).find("input").attr("type"),it(a,t,i)),"id_dropdown"==s){n=[],a={},a.name="id_dropdown",it(a,t,i);var o=$(i).find("li"),d=[];$.each(o,function(t,e){var n={};n.lid=t,n.name=$(e).text(),0==t?n.selected=!1:n.selected=!1,d.push(n)}),a.value=d}"id_textarea"==s&&(a={},a.name="id_textarea",it(a,t,i)),"id_image"==s&&(a={},a.name="id_image",it(a,t,i),a.description=$(i).find(".f-description").find("span").text(),a.img=$(i).find("img").attr("src"),a.value=$(i).find("img").attr("src")),"id_picture"==s&&(a={},a.name="id_picture",a.id=t,a.url=$(i).find("a").attr("href"),a.descriptions=$(i).find("span").text(),a.img=$(i).find("img").attr("src")),e.push(a)}),t.title=i.find("h1").text(),t.subtitle=i.find("p").text(),"请输入表单副标题"==t.subtitle&&(t.subtitle=""),t.title_visible=!0,t.published=!1,t.fields=e;var s,l,o=$("#f_select_opt").find("em").attr("data-type");"select-doc"==o?(l=$("#f_selectdoc").find(".f-input").attr("data-docId"),l?t.after_submit={type:"post_id",value:l}:(s=$("#f_selectpage").find("em").attr("page-id"),t.after_submit={type:"page_id",value:s})):(s=$("#f_selectpage").find("em").attr("page-id"),t.after_submit={type:"page_id",value:s}),ue.attr("surveyId")&&(t.id=ue.attr("surveyId"));var d=JSON.stringify(t);return d}function lt(){var t=st();e.creatSurveys(ve,t,function(t){W(),ue.attr("surveyId",t.data.id),pe=!0},function(){})}function ot(){var t,n=st();t=ue.attr("surveyId")?ue.attr("surveyId"):0;var i={};""==$("#form_title_ipt").find("input").val()?alert("您还没有填写表单的名称"):$(".f-form-item-list").find(".f-form-item").length<=0?alert("您还没有添加任何一项表单内容"):e.publish(t,ve,n,function(t){i=t.data,i.siteId=ve,W(),ue.empty(),ue.append(te(i)),dt(t.data),pe=!0},function(){})}function dt(t){rt(),ct(t)}function rt(){$("#f-copy-url").zclip({path:"/pf/survey/appsrc/js/plugins/ZeroClipboard.swf",copy:function(){return $(this).prev().val()}})}function ct(t){var e={};e.title="大家好，这是我的"+t.title+"（调查问卷），欢迎大家填写。",e.pic=$("#f_qrcode").attr("src"),e.url=$(".f-complate-input").val(),$(".f-complete-wrap").on("click",".f-outside-wb",function(){a.shareTo("weibo",e)}).on("click",".f-outside-rr",function(){a.shareTo("renren",e)}).on("click",".f-outside-qz",function(){a.shareTo("qq",e)}).on("click",".f-outside-db",function(){a.shareTo("douban",e)}).on("click",".f-outside-qwb",function(){a.shareTo("qwb",e)})}function ft(){var t=$(".f-form-item-list");t.sortable({revert:!0,axis:"y",distance:20,opacity:.4,cursor:"move",scroll:!0,scrollSensitivity:40,items:".f-form-item",placeholder:"f-form-placeholder"})}function pt(t){var n=new FormData,i=$(t).closest(".f-setting-option").find('[type="text"]').val();n.append("image",t.files[0]),e.uploadPic(ve,n,function(e){var n={};n.img=e.data,n.text=i,$(t).closest(".f-setting-option").replaceWith(Ft(n)),tt()},function(){alert("文件超过5M或者格式有误，请重新选择图片！")},{processData:!1,contentType:!1})}function mt(t){var e=$(t).offset(),n=$(t).closest(".f-setting-option").find('[type="text"]').val();i.show({msg:"确定要删除吗?",top:e.top,left:e.left,confirmWidth:"200px"},function(){var e={};e.img=!0,e.text=n,$(t).closest(".f-setting-option").replaceWith(Dt(e)),tt()})}function ut(t){var n=new FormData,i=$(t).closest(".f-setting-option").find('[type="text"]').val();n.append("image",t.files[0]),e.uploadPic(ve,n,function(e){var n={};n.img=e.data,n.text=i,$(t).closest(".f-setting-option").replaceWith(Kt(n)),tt()},function(){alert("文件超过5M或者格式有误，请重新选择图片！")},{processData:!1,contentType:!1})}function vt(t){var e=$(t).offset(),n=$(t).closest(".f-setting-option").find('[type="text"]').val();i.show({msg:"确定要删除吗?",top:e.top,left:e.left,confirmWidth:"200px"},function(){var e={};e.img=!0,e.text=n,$(t).closest(".f-setting-option").replaceWith(Gt(e)),tt()})}function ht(){me.on("click",'[data-action="del-survey"]',function(){var t=$(this).closest("dd").attr("data-id"),n={},a=$(this).offset();i.show({msg:"确定要删除吗?",top:a.top,left:a.left,confirmWidth:"200px"},function(){e.delSurvey(t,ve,n,function(){W(),O()})})}).on("click",'[data-action="show-survey"]',function(){var t=$(this),e=$(this).offset(),n=t.closest("dd").attr("data-id");pe?$.getJSON("/pa/survey/forms/"+n+"?site_id="+ve,function(e){ue.attr("surveyId",e.data.id),ue.empty(),O(e.data,function(){de=$(".f-add-section",ue),de.before(Ot(e.data.fields))}),me.find(".curr").removeClass("curr"),t.closest("dd").addClass("curr")}):i.show({msg:"未保存的数据将会丢失，确认要离开吗？",top:e.top,left:e.left+130,InnerYesBtn:"确认离开",InnerNoBtn:"留在此页",confirmWidth:"270px"},function(){$.getJSON("/pa/survey/forms/"+n+"?site_id="+ve,function(e){ue.attr("surveyId",e.data.id),ue.empty(),O(e.data,function(){de=$(".f-add-section",ue),de.before(Ot(e.data.fields))}),me.find(".curr").removeClass("curr"),t.closest("dd").addClass("curr"),pe=!0})})}).on("click",'[data-action="creat-form"]',function(){var t=$(this).offset();pe?(O(),ue.removeAttr("surveyid")):i.show({msg:"未保存的数据将会丢失，要保存草稿吗？",top:t.top,left:t.left+130,InnerYesBtn:"确认离开",InnerNoBtn:"留在此页",confirmWidth:"270px"},function(){O(),ue.removeAttr("surveyid"),pe=!0})}).on("click",'[data-action="survey-stat"]',function(){var t=$(this),e=$(this).offset(),n=t.closest("dd").attr("data-id"),a=$t(Math.round(t.closest("dd").attr("data-date")),"yyyy-MM-dd HH:mm"),s=t.text();pe?(gt(n,{page_size:12,order:"desc",range:"1",date:a,title:s},"all"),me.find(".curr").removeClass("curr"),$(this).closest("dd").addClass("curr")):i.show({msg:"未保存的数据将会丢失，要保存草稿吗？",top:e.top,left:e.left+130,InnerYesBtn:"确认离开",InnerNoBtn:"留在此页",confirmWidth:"270px"},function(){gt(n,{page_size:12,order:"desc",range:"1",date:a,title:s},"all"),me.find(".curr").removeClass("curr"),$(this).closest("dd").addClass("curr"),pe=!0})})}function gt(t,e,n){$.getJSON("/pa/survey/surveys/"+t+"/answers?site_id="+ve,e,function(i){"desc"==e.order?(i.data.sort=!0,i.data.reverse=!1):(i.data.sort=!1,i.data.reverse=!0),i.data.other=n,i.data.range=e.range,i.data.date=e.date,i.data.title=e.title,$.each(i.data.dataList,function(t,e){e.date=$t(e.created_at,"yyyy-MM-dd HH:mm")}),bt(i.data,t,e,n)})}function bt(t,e,n,i){ue.empty(),ue.append(Vt(t)),ue.attr("surveyId",e);var a=$(".f-model-list");a.empty(),a.append(ie(t)),xt(t,n,i),_t(e,n);var s=$(".f-model-show");$.getJSON("/pa/survey/forms/"+e+"?site_id="+ve,function(t){t.data.showTitle=!0,s.empty(),s.append(ne(t.data))})}function xt(t,e,n){var i=ue.attr("surveyid"),a=$(".f-model-paging");It(a,t),a.on("click",'[data-action="gotopage"]',function(){var t=$(this).attr("data-page");e.page_no=t,$.getJSON("/pa/survey/surveys/"+i+"/answers?site_id="+ve,e,function(t){e.order?(t.data.sort=!0,t.data.reverse=!1):(t.data.sort=!1,t.data.reverse=!0),t.data.date=e.date,t.data.other=n,$.each(t.data.dataList,function(t,e){e.date=$t(e.created_at,"yyyy-MM-dd HH:mm")}),bt(t.data,i,e)})})}function yt(t,e){var n,i=$(t).closest(".f-model-edit").find(".f-btn").attr("data-action");n="reverse"==i?"asc":"desc";var a=$(t),s=ue.attr("surveyId"),l=a.attr("select-type");"all"==l&&gt(s,{page_size:12,order:n,date:e.date},"all"),"star"==l&&gt(s,{page_size:12,star:!0,order:n,date:e.date},"star"),"done"==l&&gt(s,{
page_size:12,done:!1,order:n,date:e.date},"done"),"unread"==l&&gt(s,{page_size:12,unread:!0,order:n,date:e.date},"unread")}function $t(t,e){var n=new Date(t),i=function(t){return(10>t?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return i(n.getFullYear());case"MM":return i(n.getMonth()+1);case"mm":return i(n.getMinutes());case"dd":return i(n.getDate());case"HH":return i(n.getHours());case"ss":return i(n.getSeconds())}})}function _t(t,n){var a=$(".f-view-wrap"),t=t,s=$(".f-model-tab");s.on("click","[select-type]",function(){yt(this,n)}),a.on("click",'[data-action="show-answer"]',function(){var n=$(".f-model-show"),i=$(this).attr("data-id"),a=$(this);$.getJSON("/pa/survey/surveys/"+t+"/answers/"+i+"?site_id="+ve,function(s){n.empty(),n.append(ne(s.data));var l={unread:!1};a.find(".f-doc").length&&e.setStatus(t,ve,i,l,"read",function(){a.find(".f-doc").remove()}),$(".f-model-list").find(".curr").removeClass("curr"),a.addClass("curr")})}).on("click",'[data-action="getstar"]',function(){var n=$(this),i=$(".f-show-con").attr("data-id"),a=$(".f-show-con").attr("data-star"),s={};"true"==a?(s={star:!1},e.setStatus(t,ve,i,s,"star",function(){$(".f-model-list").find(".curr").find(".f-star").find("i").remove(),$(".f-show-con").attr("data-star","false"),n.find("span").text("星标")})):(s={star:!0},e.setStatus(t,ve,i,s,"star",function(){$(".f-model-list").find(".curr").find(".f-star").append('<i class="iconfont">&#xe610;</i>'),$(".f-show-con").attr("data-star","true"),n.find("span").text("取消星标")}))}).on("click",'[data-action="done"]',function(){var n=$(this),i=$(".f-show-con").attr("data-id"),a=$(".f-show-con").attr("data-done"),s={};"true"==a?(s={done:!1},e.setStatus(t,ve,i,s,"done",function(){$(".f-model-list").find(".curr").find(".f-selected").find("i").remove(),$(".f-show-con").attr("data-done","false"),n.find("span").text("处理")})):(s={done:!0},e.setStatus(t,ve,i,s,"done",function(){$(".f-model-list").find(".curr").find(".f-selected").append('<i class="iconfont">&#xe612;</i>'),$(".f-show-con").attr("data-done","true"),n.find("span").text("取消处理")}))}).on("click",'[data-action="delete"]',function(){var n=$(".f-show-con").attr("data-id"),a={},s=$(this).offset(),l=$(".f-model-show");i.show({msg:"数据删除不可恢复，是否确认?",top:s.top,left:s.left,confirmWidth:"250px"},function(){e.deleteAnswer(t,ve,n,a,function(){$(".f-model-list").find(".curr").remove(),l.find(".f-show-con").empty()})})}).on("click",'[data-action="reverse"]',function(){var e=$(this).closest(".f-model-edit").find(".curr").attr("select-type");"star"==e?gt(t,{page_size:12,order:"desc",star:!0,date:n.date},e):"done"==e?gt(t,{page_size:12,order:"desc",done:!1,date:n.date},e):"unread"==e?gt(t,{page_size:12,order:"desc",unread:!0,date:n.date},e):gt(t,{page_size:12,order:"desc",date:n.date})}).on("click",'[data-action="sort"]',function(){var e=$(this).closest(".f-model-edit").find(".curr").attr("select-type");"star"==e?gt(t,{page_size:12,star:!0,date:n.date},e):"done"==e?gt(t,{page_size:12,done:!1,date:n.date},e):"unread"==e?gt(t,{page_size:12,unread:!0,date:n.date},e):gt(t,{page_size:12,date:n.date})}).on("click",'[data-action="export"]',function(){window.open("/pa/survey/surveys/"+t+"/answers/0/export?site_id="+ve)}).on("click",'[data-action="open-share"]',function(){var e={};e.surveyId=t,e.siteId=ve,e.title=$(".f-side").find(".curr").find("span").text(),ue.append(ae(e)),wt(e)});var l=$(".f-view-tab"),o=$('[page-id="answer"]'),d=$('[page-id="table"]');l.on("click",'[data-action="show-answer-page"]',function(){l.find(".curr").removeClass("curr"),$(this).closest("li").addClass("curr"),d.hide(),o.show()}).on("click",'[data-action="show-table-page"]',function(){var t=me.find(".curr").attr("data-id"),e=$(this);$.getJSON("/pa/survey/surveys/"+t+"/stat?site_id="+ve,function(t){l.find(".curr").removeClass("curr"),e.closest("li").addClass("curr"),o.hide(),d.show(),d.empty(),$.each(t.data.fields,function(t,e){var n=0;e.value&&$.each(e.value,function(t,e){n+=e.selected_count}),e.valCount=Math.floor(n)}),kt(t.data)})}),d.on("click",'[data-action="show-text"]',function(){jt(this)})}function wt(t){var e=$(".f-share-dlg"),n={};n.title="大家好，这是我的"+t.title+"（调查问卷），欢迎大家填写。",n.pic="http://form.kuaizhan.com/forms/"+t.surveyId+"/qrcode",n.url="http://form.kuaizhan.com/forms/"+t.surveyId,e.on("click",".f-outside-wb",function(){a.shareTo("weibo",n)}).on("click",".f-outside-rr",function(){a.shareTo("renren",n)}).on("click",".f-outside-qz",function(){a.shareTo("qq",n)}).on("click",".f-outside-db",function(){a.shareTo("douban",n)}).on("click",".f-outside-qwb",function(){a.shareTo("qwb",n)}),$("#share_dlg_clip").zclip({path:"/pf/survey/appsrc/js/plugins/ZeroClipboard.swf",copy:function(){return $(this).prev().text()}}),$('[data-action="close-modal"]').on("click",function(){$(".f-modal",$(".f-p-wrap")).remove(),$(".f-modal-mask").remove(),$("html").css({overflow:"auto"})})}function kt(t){var e=[],n=[],i=$.extend({},t.visits,t.answerCount),a=[];$.each(i,function(t,e){a.push(t)}),a.sort();var s=a.pop();s=s.replace(/-/g,"/");for(var l=new Date(s),o=[],d=new Date(l.setDate(l.getDate()-30)),r=0;30>r;r++){var c=new Date(d.setDate(d.getDate()+1)),f=c.getDate(),p=c.getMonth()+1,m=c.getFullYear();10>p&&(p="0"+p),10>f&&(f="0"+f);var u=m+"-"+p+"-"+f;o.push(u)}var v={},h=[];$.each(o,function(t,e){v[e]=0,h.push(e)});var g=$.extend({},v,t.answerCount),b=$.extend({},v,t.visits);$.each(g,function(t,e){n.push(e)}),$.each(b,function(t,n){e.push(n)});var x=[];$.each(h,function(t,e){var n=e.substring(5);x.push(n)}),e=e.slice(0,30),n=n.slice(0,30);var y=$('[page-id="table"]');y.append(le(t));var _=$("#answerCanvas");_.highcharts({title:{text:t.title},subtitle:{text:""},xAxis:{categories:x},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"horizontal",align:"top",x:560,y:-130,verticalAlign:"middle",borderWidth:0},series:[{name:"反馈数量",data:n},{name:"浏览数量",data:e}]});var w=$($(".highcharts-axis-labels")[0]),k=w.find("text");$.each(k,function(t,e){(t+1)%5&&0!=t&&30!=t?$(e).remove():$(e).attr("y",272)})}function jt(t){var e=ue.attr("surveyId"),n=$(t).attr("data-lid");$.getJSON("/pa/survey/surveys/"+e+"/fields/"+n+"?site_id="+ve,{page_size:9,page_no:1},function(t){$(".f-p-wrap").append(se(t.data)),qt(t.data,e,n),$("html").css({overflow:"hidden"})})}function qt(t,e,n){var i=$(".f-answers-paging");It(i,t),i.on("click",'[data-action="gotopage"]',function(){var t=$(this).attr("data-page");$.getJSON("/pa/survey/surveys/"+e+"/fields/"+n+"?site_id="+ve,{page_size:9,page_no:t},function(t){$(".f-modal").remove(),$(".f-modal-mask").remove(),$(".f-p-wrap").append(se(t.data)),qt(t.data,e,n)})}),$('[data-action="close-modal"]').on("click",function(){$(".f-modal",$(".f-p-wrap")).remove(),$(".f-modal-mask").remove(),$("html").css({overflow:"auto"})})}function Ct(){$(".f-p-wrap").on("click",'[data-action="remove-modal"]',function(){$(".f-modal",$(".f-p-wrap")).remove(),$(this).remove(),$("html").css({overflow:"auto"})})}function It(t,e){var n=e.totalPageCount;if(!(n>1))return!1;var i,a=e.currentPageNo,s=(e.currentPageSize,{});s.noNext=!1,s.noPre=!1,s.more=!1,s.currentPage=!1,s.max=e.totalPageCount;var l=0,o=0;5>=n?(i=[],l=1,o=n):(i=[],4>=a?(l=1,o=5):a>=n-3?(l=n-4,o=n):(l=a-2,o=a+2));for(var d=l;o>=d;d++)i.push({currentPage:a==d?!0:!1,num:d});s.first=1,s.last=n,s.next=a+1,s.next>n&&(s.noNext=!0,s.next="unclick"),s.pre=a-1,s.pre<1&&(s.pre="unclick",s.noPre=!0),s.pages=i,t.empty(),t.append(oe(s))}function St(){$(window).bind("beforeunload",function(){return 0==pe?"确认离开本页？未保存的内容将会丢失!":void 0})}function Tt(){R()}function zt(){return he}var Mt,Nt,Ht,Lt,Rt,Wt,Ot,Pt,Bt,Et,At,Ut,Xt,Dt,Ft,Jt,Yt,Zt,Kt,Gt,Qt,Vt,te,ee,ne,ie,ae,se,le,oe,de,re,ce,fe,pe=!0,me=$(".f-side"),ue=$(".f-con"),ve=$(".f-con").attr("siteId"),he={preload:zt,show:Tt};return he}),require({paths:{jquery:"empty:",text:"util/text"},config:{text:{useXhr:function(t,e,n,i){return!0}}}}),function(){require(["module/formEdit"],function(t){t.preload().show()})}(),define("formEdit",function(){});
!function(){"use strict";function encodeHTMLSource(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;return function(i){return i?i.toString().replace(t,function(t){return e[t]||t}):i}}function resolveDefs(c,block,def){return("string"==typeof block?block:block.toString()).replace(c.define||skip,function(m,code,assign,value){return 0===code.indexOf("def.")&&(code=code.substring(4)),code in def||(":"===assign?def[code]=value:eval("def['"+code+"']="+value)),""}).replace(c.use||skip,function(m,code){var v=eval(code);return v?resolveDefs(c,v,def):v})}function unescape(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var doT={version:"0.2.0",templateSettings:{evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0},global=function(){return this||(0,eval)("this")}();"undefined"!=typeof module&&module.exports?module.exports=doT:"function"==typeof define&&define.amd?define("util/doT",[],function(){return doT}):global.doT=doT,global.encodeHTML=encodeHTMLSource();var startend={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},skip=/$^/;doT.template=function(e,t,i){t=t||doT.templateSettings;var n,a,s,r=t.append?startend.append:startend.split,d=0;if(t.use||t.define){var o=global.def;global.def=i||{},n=resolveDefs(t,e,global.def),global.def=o}else n=e;n=("var out='"+(t.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(t.interpolate||skip,function(e,t){return r.start+unescape(t)+r.end}).replace(t.encode||skip,function(e,t){return a=!0,r.startencode+unescape(t)+r.end}).replace(t.conditional||skip,function(e,t,i){return t?i?"';}else if("+unescape(i)+"){out+='":"';}else{out+='":i?"';if("+unescape(i)+"){out+='":"';}out+='"}).replace(t.iterate||skip,function(e,t,i,n){return t?(d+=1,s=n||"i"+d,t=unescape(t),"';var arr"+d+"="+t+";if(arr"+d+"){var "+i+","+s+"=-1,l"+d+"=arr"+d+".length-1;while("+s+"<l"+d+"){"+i+"=arr"+d+"["+s+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||skip,function(e,t){return"';"+unescape(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+="),a&&t.selfcontained&&(n="var encodeHTML=("+encodeHTMLSource.toString()+"());"+n);try{return new Function(t.varname,n)}catch(l){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),l}},doT.compile=function(e,t){return doT.template(e,null,t)}}(),define("util/ajax",[],function(){function e(e,t,i,n,a,s){s=s||{},$.ajax("/pa/survey/surveys"+t,$.extend({type:e,data:i,dataType:"json",success:n,error:a},s))}function t(e,t,i,n,a,s){s=s||{},$.ajax("/forms"+t,$.extend({type:e,data:i,dataType:"json",success:n,error:a},s))}var i={creatSurveys:function(t,i,n,a){e("put","?site_id="+t,i,n,a)},uploadPic:function(t,i,n,a,s){e("post","/images?site_id="+t,i,n,a,s)},uploadPicture:function(e,i,n,a,s){t("post","/images?site_id="+e,i,n,a,s)},delSurvey:function(t,i,n,a){e("delete","/"+t+"?site_id="+i,n,a)},publish:function(t,i,n,a){e("put","/"+t+"/publish?site_id="+i,n,a)},setStatus:function(t,i,n,a,s,r){e("put","/"+t+"/answers/"+n+"/"+s+"?site_id="+i,a,r)},deleteAnswer:function(t,i,n,a,s){e("delete","/"+t+"/answers/"+n+"?site_id="+i,a,s)}};return i}),define("text",["module"],function(e){"use strict";var t,i,n,a,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o="undefined"!=typeof location&&location.href,l=o&&location.protocol&&location.protocol.replace(/\:/,""),c=o&&location.hostname,f=o&&(location.port||void 0),u=[],p=e.config&&e.config()||{};return t={version:"2.0.6",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=s[t];try{e=new ActiveXObject(i)}catch(n){}if(e){s=[i];break}}return e},parseName:function(e){var t,i,n,a=!1,s=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!r||s>1)?(t=e.substring(0,s),i=e.substring(s+1,e.length)):t=e,n=i||t,s=n.indexOf("!"),-1!==s&&(a="strip"===n.substring(s+1),n=n.substring(0,s),i?i=n:t=n),{moduleName:t,ext:i,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,a){var s,r,d,o=t.xdRegExp.exec(e);return o?(s=o[2],r=o[3],r=r.split(":"),d=r[1],r=r[0],!(s&&s!==i||r&&r.toLowerCase()!==n.toLowerCase()||(d||r)&&d!==a)):!0},finishLoad:function(e,i,n,a){n=i?t.strip(n):n,p.isBuild&&(u[e]=n),a(n)},load:function(e,i,n,a){if(a.isBuild&&!a.inlineText)return void n();p.isBuild=a.isBuild;var s=t.parseName(e),r=s.moduleName+(s.ext?"."+s.ext:""),d=i.toUrl(r),u=p.useXhr||t.useXhr;!o||u(d,l,c,f)?t.get(d,function(i){t.finishLoad(e,s.strip,i,n)},function(e){n.error&&n.error(e)}):i([r],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,n)})},write:function(e,i,n,a){if(u.hasOwnProperty(i)){var s=t.jsEscape(u[i]);n.asModule(e+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,i,n,a,s){var r=t.parseName(i),d=r.ext?"."+r.ext:"",o=r.moduleName+d,l=n.toUrl(r.moduleName+d)+".js";t.load(o,n,function(i){var n=function(e){return a(l,e)};n.asModule=function(e,t){return a.asModule(e,l,t)},t.write(e,o,n,s)},s)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(i=require.nodeRequire("fs"),t.get=function(e,t){var n=i.readFileSync(e,"utf8");0===n.indexOf("\ufeff")&&(n=n.substring(1)),t(n)}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,i,n,a){var s,r=t.createXhr();if(r.open("GET",e,!0),a)for(s in a)a.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),a[s]);p.onXhr&&p.onXhr(r,e),r.onreadystatechange=function(t){var a,s;4===r.readyState&&(a=r.status,a>399&&600>a?(s=new Error(e+" HTTP status: "+a),s.xhr=r,n(s)):i(r.responseText),p.onXhrComplete&&p.onXhrComplete(r,e))},r.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,a="utf-8",s=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),d=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),a)),o="";try{for(i=new java.lang.StringBuffer,n=d.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),i.append(n);null!==(n=d.readLine());)i.append(r),i.append(n);o=String(i.toString())}finally{d.close()}t(o)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var i,s,r={},d=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(d,1,0,!1),s=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),s.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),r),s.close(),i.close(),t(r.value)}catch(o){throw new Error((d&&d.path||"")+": "+o)}}),t}),define("text!template/form.html!strip",[],function(){return'	<div class="f-form-title">\n		<h1 data-id="{{=it.id}}" data-siteid="{{=it.site_id}}">{{!it.title}}</h1>\n		<p class="f-subtitle">{{!it.subtitle}}</p>\n	</div>\n	{{~it.fields:list}}\n		{{?list.name == \'id_checkbox\'}}\n			<section class="f-form-item" data-name="id_checkbox"  data-id="{{=list.id}} " data-required="{{=list.required}}">\n				<h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n				<div class="f-item-wrap">\n					{{~list.value:item}}\n					<div class="f-control" data-type="list">\n						<label data-lid="{{=item.lid}}">\n							<input type="checkbox" class="f-checkbox" />\n							<em class="f-chengge-checked">\n								<i class="iconfont checken-01">&#xe615;</i>\n								<i class="iconfont checken-02">&#xe616;</i>\n							</em>\n							<span>{{!item.name}}</span>\n						</label>\n					</div>\n					{{~}}\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_image_checkbox\'}}\n			<section class="f-form-item" data-name="id_checkbox" data-id="{{=list.id}}" data-required="{{=list.required}}">\n				<h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n				<div class="f-item-wrap">\n					{{~list.value:item}}\n					<div class="f-control" data-type="list">\n						<label data-lid="{{=item.lid}}" class="f-hasImg">\n							<input type="checkbox" class="f-checkbox" />\n							<em class="f-chengge-checked">\n								<i class="iconfont checken-01">&#xe615;</i>\n								<i class="iconfont checken-02">&#xe616;</i>\n							</em>\n							{{?item.img}}\n							<em class="f-img">\n								<img src="{{=item.img}}">\n							</em>\n							{{?}}\n							<span>{{!item.name}}</span>\n						</label>\n					</div>\n					{{~}}\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_radio\'}}\n			<section class="f-form-item"  data-name="id_radio" data-id="{{=list.id}}" data-required="{{=list.required}}" >\n				<h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n				<div class="f-item-wrap">\n					{{~list.value:item}}\n					<div class="f-control" data-type="list">\n						<label data-lid="{{=item.lid}}">\n							<input type="radio" class="f-radio" name="{{=list.id}}" />\n							<em class="f-chengge-checked">\n								<i class="iconfont checken-01">&#xe613;</i>\n								<i class="iconfont checken-02">&#xe614;</i>\n							</em>\n							<span>{{!item.name}}</span>\n						</label>\n					</div>\n					{{~}}\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_image_radio\'}}\n			<section class="f-form-item"  data-name="id_radio" data-id="{{=list.id}}" data-required="{{=list.required}}">\n				<h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n				<div class="f-item-wrap">\n					{{~list.value:item}}\n					<div class="f-control" data-type="list">\n						<label data-lid="{{=item.lid}}" class="f-hasImg">\n							<input type="radio" class="f-radio" name="{{=list.id}}" />\n							<em class="f-chengge-checked">\n								<i class="iconfont checken-01">&#xe613;</i>\n								<i class="iconfont checken-02">&#xe614;</i>\n							</em>\n							{{?item.img}}\n							<em class="f-img">\n								<img src="{{=item.img}}">\n							</em>\n							{{?}}\n							<span>{{!item.name}}</span>\n\n						</label>\n					</div>\n					{{~}}\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_section\'}}\n			<section class="f-form-item"  data-name="id_section" data-id="{{=list.id}}">\n				<h2><em>{{!list.title}} </em></h2>\n				<div class="f-item-wrap">\n					<div class="f-control">\n						<hr class="f-line" />\n					</div>\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_text\'}}\n			<section class="f-form-item" data-name="id_text" data-id="{{=list.id}}" data-required="{{=list.required}}">\n				<h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n				<div class="f-item-wrap">\n					<div class="f-control">\n					<input type="{{=list.type}}" class="f-input"  data-name="text"/>\n					</div>\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_textarea\'}}\n			<section class="f-form-item" data-name="id_textarea" data-id="{{=list.id}}" data-required="{{=list.required}}">\n				<h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n				<div class="f-item-wrap">\n					<div class="f-control">\n						<textarea class="f-textarea"  data-name="text"></textarea>\n					</div>\n				</div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_dropdown\'}}\n			<section class="f-form-item"  data-name="id_dropdown" data-id="{{=list.id}}" data-required="{{=list.required}}">\n			    <h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			    <div class="f-item-wrap">\n			        <div class="f-control">\n			            <div class="f-select clearfix">\n			                <em>请选择</em>\n			                <i class="iconfont">&#xe601;</i>\n			                <ul class="f-option-list"  data-type="select" style="display:none">\n			                    {{~list.value:item}}\n			                    <li class="option" data-action="option" data-lid={{=item.lid}}>{{!item.name}}</li>\n			                    {{~}}\n			            	</ul>\n			            </div>	\n			        </div>\n			    </div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_image\'}}\n			<section class="f-form-item"  data-name="id_image" data-id="{{=list.id}}" data-required="{{=list.required}}">\n			    <h2><em>{{!list.title}} </em>{{?list.required}}<span>*</span>{{??}}{{?}}</h2>\n			    <div class="f-item-wrap">\n					<div class="f-description"><span>{{!list.description}}</span></div>\n					<div class="f-control">\n						<span class="f-span">选择图片</span>\n						<input type="file" class="file-image" data-name="fileImage" data-action="add-image" size="28" />\n						<div class="image-style">\n							<a href="javascript:void(0);">\n								{{?list.img}}\n								<img class="f-image" src="{{=list.img}}" />\n								{{?}}\n							</a>\n						</div>\n					</div>\n			    </div>\n			</section>\n		{{?}}\n		{{?list.name == \'id_picture\'}}\n			<section class="f-form-item"  data-name="id_picture" data-id="{{=list.id}}">\n				<div class="f-item-wrap">\n					<div class="f-control">\n						<a href="{{=list.url}}">\n							{{?list.img}}\n							<img class="f-image" src="{{=list.img}}" />\n							{{?}}\n						</a>\n					</div>\n					<div class="f-descriptions"><span>{{!list.descriptions}}</span></div>\n				</div>\n			</section>\n		{{?}}\n	{{~}}\n	<div class="f-btn-wrap">\n		<a href="javascript:void(0);" data-action="post-form">提交</a>\n	</div>'}),define("module/form",["util/doT","util/ajax","text!template/form.html!strip"],function(e,t,i){function n(){$.getJSON(location.href+"?_="+(new Date).getTime(),function(e){e.data.id?(x=e.data.site_id,_.html(w(e.data)),a(),c(),u(),v(e.data.id)):_.html("表单不存在或者被删除")})}function a(){var e=$('[data-name="id_dropdown"]');s(e)}function s(e,t){e.on("click",".f-select",function(){"none"==$(this).find(".f-option-list")[0].style.display?($(".f-option-list").hide(),$(".f-form-item").css({"z-index":1}),$(this).find(".f-option-list").show(),$(this).closest(".f-form-item").css({"z-index":10})):($(this).find(".f-option-list").hide(),$(this).closest(".f-form-item").css({"z-index":1}))}).on("click","[data-action=option]",function(){var e=$(this).closest(".f-select").find("em"),i=($(this).closest(".f-option-list"),$(this).html()),n=$(this).attr("data-lid");e.html(i),n&&e.attr("data-lid",n),t&&t()})}function r(e,t){return e.id=$(t).attr("data-id"),e.title=$(t).find("h2").find("em").text(),e.instruct="",$(t).find("h2").find("span")[0]?e.required=!0:e.required=!1,e}function d(e,t,i){var n=$(t).find("label");return $.each(n,function(e,t){var n={};n.lid=$(t).attr("data-lid"),n.name=$(t).find("span").text(),n.img=$(t).find("em img").attr("src"),$(t).find("input")[0].checked?n.selected=!0:n.selected=!1,i.push(n)}),i}function o(){var e={},t=[],i=[],n=$(".f-form-item",_);$.each(n,function(e,n){var a,s=$(n).attr("data-name"),o=!1;if($(n).find("img").length>0&&(o=!0),"id_checkbox"==s&&(i=[],a={},o?a.name="id_image_checkbox":a.name="id_checkbox",r(a,n),d(a,n,i),a.value=i),"id_radio"==s&&(i=[],a={},o?a.name="id_image_radio":a.name="id_radio",r(a,n),d(a,n,i),a.value=i),"id_section"==s&&(a={},a.name="id_section",a.id=e,a.title=$(n).find("h2").find("em").text(),a.subtitle=""),"id_text"==s&&(a={},a.name="id_text",a.value=$(n).find(".f-input").val(),r(a,n)),"id_dropdown"==s){i=[],a={},a.name="id_dropdown",r(a,n);var l=$(n).find("li"),c=[];$.each(l,function(e,t){var i={};i.lid=$(t).attr("data-lid"),i.name=$(t).text(),$(t).attr("data-lid")==$(t).closest(".f-select ").find("em").attr("data-lid")?i.selected=!0:i.selected=!1,c.push(i)}),a.value=c}"id_textarea"==s&&(a={},a.name="id_textarea",a.value=$(n).find("textarea").val(),r(a,n)),"id_image"==s&&(a={},a.name="id_image",r(a,n),a.description=$(n).find(".f-description").find("span").text(),a.img=$(n).find("img").attr("src"),a.value=$(n).find("img").attr("src")),"id_picture"==s&&(a={},a.name="id_picture",a.id=e,a.url=$(n).find("a").attr("href"),a.descriptions=$(n).find("span").text(),a.img=$(n).find("img").attr("src")),t.push(a)}),e.title=_.find("h1").text(),e.subtitle=_.find(".f-subtitle").text(),e.title_visible=!0,e.published=!0,e.fields=t,e.id=_.find("h1").attr("surveyId");var a=JSON.stringify(e);return a}function l(){var e=!0,t=$(".f-form-item",_);return $.each(t,function(t,i){var n=$(i).attr("data-required"),a=$(i).attr("data-name");if("true"==n){if("id_text"==a||"id_textarea"==a){var s=$(i).find("input").val(),r=$(i).find("textarea").val();if(""==s||""==r)return alert("您有没填写的必填项"),$(i)[0].scrollIntoView(),$(i).find("input").focus(),$(i).find("textarea").focus(),e=!1,!1;if("email"==$(i).find("input").attr("type")){var d=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!d.test(s))return $(i).find("input")[0].scrollIntoView(),$(i).find("input").focus(),alert("请输入正确的Email！"),e=!1,!1}else if("tel"==$(i).find("input").attr("type")){var o=/^((\+?86)|(\(\+86\)))?1\d{10}$/;if(!o.test(s))return $(i).find("input")[0].scrollIntoView(),$(i).find("input").focus(),alert("请输入正确的手机号！"),e=!1,!1}}else if("id_checkbox"==a||"id_image_checkbox"==a||"id_radio"==a||"id_image_radio"==a){var l=$(i).find("input"),c=0;if($.each(l,function(e,t){t.checked&&(c+=1)}),!c)return alert("您有没选择的必选项"),$(i)[0].scrollIntoView(),e=!1,!1}else if("id_dropdown"==a){var f=$(i).find(".f-select > em").attr("data-lid");if(!f)return alert("您有没选择的必选项"),$(i)[0].scrollIntoView(),e=!1,!1}else if("id_image"==a&&"http://kzcdn.itc.cn/res/skin/images/img/pic-one.png"==$(i).find("img").attr("src"))return alert("请选择合适的照片上传！"),e=!1,!1}else{var s=$(i).find("input").val();if("email"==$(i).find("input").attr("type")){var d=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!d.test(s)&&s)return $(i).find("input")[0].scrollIntoView(),$(i).find("input").focus(),alert("请输入正确的Email！"),e=!1,!1}else if("tel"==$(i).find("input").attr("type")){var o=/^((\+?86)|(\(\+86\)))?1\d{10}$/;if(!o.test(s)&&s)return $(i).find("input")[0].scrollIntoView(),$(i).find("input").focus(),alert("请输入正确的手机号！"),e=!1,!1}}}),e}function c(){_.on("change",'[data-action="add-image"]',function(){f(this)})}function f(e){var i=new FormData;i.append("image",e.files[0]),t.uploadPicture(x,i,function(e){var t={};t.img=e.data,_.find(".image-style").find(".f-image").attr("src",t.img)},function(){alert("文件超过5M或者格式有误，请重新选择图片！")},{processData:!1,contentType:!1})}function u(){var e=$(".f-btn-wrap"),t=_.find("h1").attr("data-id");e.on("click",'[data-action="post-form"]',function(){if(l()){var e=o();$.ajax({url:t+"/answers",type:"post",data:e,dataType:"JSON",success:p,error:m})}})}function p(e){alert("您已经成功提交，谢谢！"),location.href=e.data.value}function m(){alert("提交失败！")}function v(e){$.ajax("/forms/"+e+"/visits",{type:"post"})}function g(){n()}function h(){return y}var x,w=e.template(i),_=$(".f-form-page"),y={preload:h,show:g};return y}),require({paths:{jquery:"empty:",text:"util/text"},config:{text:{useXhr:function(e,t,i,n){return!0}}}}),function(){require(["module/form"],function(e){e.preload().show()})}(),define("form",function(){});